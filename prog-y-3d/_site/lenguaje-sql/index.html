<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>9. El lenguaje SQL - PROG Y 3D</title> <link rel="shortcut icon" href="/docs/prog-y-3d/_site/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/docs/prog-y-3d/_site/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/docs/prog-y-3d/_site/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/docs/prog-y-3d/_site/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>El lenguaje SQL | PROG Y 3D</title> <meta name="generator" content="Jekyll v4.2.0" /> <meta property="og:title" content="El lenguaje SQL" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Apuntes de la asignatura “Introducción a la programación y al diseño 3D”, optativa de 2º curso de bachillerato ofertada por el IES Celia Viñas de Almería (España)" /> <meta property="og:description" content="Apuntes de la asignatura “Introducción a la programación y al diseño 3D”, optativa de 2º curso de bachillerato ofertada por el IES Celia Viñas de Almería (España)" /> <link rel="canonical" href="/docs/prog-y-3d/_site/lenguaje-sql/" /> <meta property="og:url" content="/docs/prog-y-3d/_site/lenguaje-sql/" /> <meta property="og:site_name" content="PROG Y 3D" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="El lenguaje SQL" /> <script type="application/ld+json"> {"@type":"WebPage","url":"/docs/prog-y-3d/_site/lenguaje-sql/","headline":"El lenguaje SQL","description":"Apuntes de la asignatura “Introducción a la programación y al diseño 3D”, optativa de 2º curso de bachillerato ofertada por el IES Celia Viñas de Almería (España)","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/docs/prog-y-3d/_site/" class="site-title lh-tight"> PROG Y 3D </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/prog-y-3d/_site/" class="nav-list-link">Introd. a la prog. y al diseño 3D</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/prog-y-3d/_site/presentacion/" class="nav-list-link">0. Presentación de la asignatura</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/prog-y-3d/_site/pensamiento-computacional/" class="nav-list-link">1. Pensamiento computacional</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/prog-y-3d/_site/representacion-de-la-informacion/" class="nav-list-link">2. Representación de la información</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/prog-y-3d/_site/introduccion-a-la-programacion/" class="nav-list-link">3. Introducción a la programación</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/prog-y-3d/_site/estructuras-de-datos/" class="nav-list-link">4. Estructuras de datos. Subalgoritmos</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/prog-y-3d/_site/javascript/" class="nav-list-link">5. Lenguaje Javascript</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/prog-y-3d/_site/orientacion-a-objetos/" class="nav-list-link">6. Orientación a objetos</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/prog-y-3d/_site/bases-de-datos/" class="nav-list-link">7. Bases de datos</a><ul class="nav-list"></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/prog-y-3d/_site/lenguaje-sql/" class="nav-list-link active">9. El lenguaje SQL</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/prog-y-3d/_site/seguridad-y-privacidad/" class="nav-list-link">10. Seguridad y privacidad</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/prog-y-3d/_site/tecnologias-de-impresion-3d/" class="nav-list-link">11. Tecnologías de impresión 3D</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/prog-y-3d/_site/modelado-e-impresion-3d/" class="nav-list-link">12. Modelado e impresión 3D</a><ul class="nav-list"></ul></li></ul></li><li class="nav-list-item"><a href="/docs/prog-y-3d/_site/about/" class="nav-list-link">About</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search PROG Y 3D" aria-label="Search PROG Y 3D" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/docs/prog-y-3d/_site/">Introd. a la prog. y al diseño 3D</a></li> <li class="breadcrumb-nav-list-item"><span>9. El lenguaje SQL</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 class="no_toc" id="9-el-lenguaje-sql"> <a href="#9-el-lenguaje-sql" class="anchor-heading" aria-labelledby="9-el-lenguaje-sql"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 9. El lenguaje SQL </h1> <ul id="markdown-toc"> <li><a href="#74-el-diseño-físico" id="markdown-toc-74-el-diseño-físico">7.4. El diseño físico</a></li> </ul> <p>Comandos básicos de SQL: DDL, DML y DCL.</p> <h2 id="74-el-diseño-físico"> <a href="#74-el-diseño-físico" class="anchor-heading" aria-labelledby="74-el-diseño-físico"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 7.4. El diseño físico </h2> <p>Unidad 3 Creación de bases de datos relacionales: el diseño físico</p> <p>I.E.S. Celia Viñas (Almería)</p> <p>C.F.G.S. Desarrollo de Aplicaciones Web</p> <p>Módulo de Bases de datos</p> <ol> <li> <p>Creación de bases de datos relacionales: el diseño físico Índice del tema Unidad 3. Creación de bases de datos relacionales: el diseño físico Contenido:</p> <p>3.1 Notación 3.2 Interfaces gráficos para el SGDB 3.3 Intérpretes de comandos para el SGBD 3.4 El lenguaje de definición de datos 3.5 Definición de la base de datos con SQL 3.6 Definición de la estructura de la base de datos con SQL</p> </li> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.1 Notación 3.1 Notación</p> <p>MAYÚSCULAS: palabra reservada. minúsculas cursiva: definido en otra parte. [corchetes] : opcionalidad. { llaves | llaves | … }: optatividad (se debe elegir una opción) Puntos suspensivos (…): repetición del último elemento</p> </li> </ol> <p>p. 92</p> <ol> <li>Creación de bases de datos relacionales: el diseño físico 3.1 Notación Ejemplo: sintaxis de la instrucción DROP TABLE DROP [TEMPORARY] TABLE [IF EXISTS] tbl_name [, tbl_name] … [RESTRICT | CASCADE]</li> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.2 Interfaces gráficos para el SGBD 3.2 Interfaces gráficos para el SGBD</p> <p>A lo largo del curso trabajaremos principalmente con dos SGBD relacionales: Microsoft Access MySQL Antes de continuar, vamos a hablar brevemente de ellos.</p> </li> </ol> <p>p. 93</p> <ol> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.2 Interfaces gráficos para el SGBD</p> <p>¿Qué es Microsoft Access? MS Access es un gestor de bases de datos relacionales ofimáticas, destinado a ser fácil de usar y altamente productivo. No está diseñado para un alto rendimiento ni para soportar múltiples conexiones simultáneas. Es propiedad de Microsoft y se incluye en el paquete Microsoft Office, aunque puede obtenerse e instalarse por separado. Puede conectarse a múltiples lenguajes de programación (C/C++, PHP, Java…), aunque para su operación en red requiere un servidor web de Microsoft (IIS) Pueden programarse módulos adicionales con VBA (Visual Basic for Applications) Está muy extendido en el ámbito de las bases de datos ofimáticas por su relativa facilidad de uso.</p> </li> </ol> <p>new!</p> <ol> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.2 Interfaces gráficos para el SGBD Breve historia de MS Access</p> <p>Access 1.0 apareció en 1992, después de varios intentos fallidos de Microsoft de desarrollar un SGBD sencillo para usuarios sin gran experiencia. A partir de 1995 empieza a formar parte de la suite Microsoft Office y se populariza. Access es el programa que más cambios ha sufrido en las sucesivas versiones de Office, siendo a menudo los formatos de base de datos incompatibles entre versiones. La versión actual es Access 2010.</p> </li> </ol> <p>new!</p> <ol> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.2 Interfaces gráficos para el SGBD</p> <p>¿Qué es MySQL? MySQL es un gestor de bases de datos relacional multiusuario y multiplataforma de altas prestaciones. Permite mútiples conexiones remotas. El software libre, aunque el código es propiedad de la empresa AB MySQL (adquirida por SUN en 2008 y por Oracle en 2010) Existen librerías para acceder a MySQL desde los lenguajes de programación más extendidos: C/C++, Java, PHP, Perl, Pascal… Está muy extendida en aplicaciones web, generalmente en combinación con PHP. Cuenta un un interfaz gráfico programado en PHP, llamado PHPMyAdmin, que se ejecuta en el navegador web y permite administrar remotamente las bases de datos.</p> </li> </ol> <p>new!</p> <ol> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.2 Interfaces gráficos para el SGBD Breve historia de MySQL</p> <p>MySQL surgió como un proyecto OpenSource en Suecia en 1995. El objetivo era lograr un SGBD rápido y fiable que cumpliera con el estándar SQL. Las primeras versiones (que se denominaron mSQL) eran muy ineficientes. La popularización de PHP y su ganancia en eficiencia a partir de la versión 3 la han hecho muy popular en la actualidad. Versión más reciente: 5.5.17 (octubre de 2011)</p> </li> </ol> <p>new!</p> <ol> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.2 Interfaces gráficos para el SGBD Interfaz gráfico para MS Access</p> <p>El interfaz está integrado en el propio SGBD y son inseparables.</p> </li> </ol> <p>new!</p> <ol> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.2 Interfaces gráficos para el SGBD Interfaces gráficos para MySQL</p> <p>Hay varios, y el más usado es PHPMyAdmin. Debe instalarse por separado y es un interfaz web.</p> </li> </ol> <p>p. 93</p> <ol> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.2 Interfaces gráficos para el SGBD Interfaz gráfico para Oracle</p> <p>Oracle incorpora el Enterprise Manager, incluido en el propio paquete de Oracle. Interfaz gráfico para DB2 de IBM Para este SGBD existe el DB2 Data Studio (antes llamado Control Center). DB2 tiene una versión gratuita reducida (DB2 Express)</p> </li> </ol> <p>p. 94</p> <p>p. 96</p> <ol> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.3. Intérpretes de comandos para SGBD 3.3 Intérpretes de comandos para SGBD</p> <p>Microsoft Access: carece de intérprete de comandos. Sólo puede usarse a través de su interfaz gráfico. MySQL: el intérprete de comandos se llama mysql. Oracle: su intérprete es SQL*Plus.</p> </li> </ol> <p>p. 97</p> <ol> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.3. Intérpretes de comandos para SGBD El intérprete de comandos de MySQL</p> <p>Sintaxis general: mysql [options] [database] Se obtiene la lista completa de opciones con mysql –help Conexión con el servidor: mysql -u usuario [-p password] [-h servidor] [-P puerto] Una vez conectados al servidor, obtendremos el prompt del intérprete de comandos: mysql&gt;</p> </li> </ol> <p>p. 98</p> <ol> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.3. Intérpretes de comandos para SGBD Algunos comandos sencillos para MySQL</p> <p>mysql&gt; SELECT VERSION(); mysql&gt; SELECT CURRENT_DATE(); mysql&gt; SELECT NOW(); mysql&gt; SELECT USER(); mysql&gt; SOURCE nombre_archivo.sql; mysql&gt; SHOW DATABASES; mysql&gt; USE nombre_db; mysql&gt; SHOW TABLES; mysql&gt; DESCRIBE [esquema.]nombre_tabla;</p> </li> </ol> <p>p. 100</p> <p>Act. 3.1 (p. 94) + Act. 3.4 (p. 102)</p> <ol> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.4. El lenguaje de definición de datos 3.4 El lenguaje de definición de datos: SQL</p> <p>Breve historia de SQL Origen de SQL Codd (1970) propone el modelo relacional y un lenguaje de acceso al mismo basado en álgebra relacional. Evolución de SQL IBM (1977) crea el lenguaje SEQUEL basado en la teoría de Codd para un SGBD experimental. Oracle (1979) lo utiliza por primera vez en un producto comercial. SQL evoluciona a partir de SEQUEL. Tiene mucho éxito, pero cada compañía fabrica su “dialecto” de SQL: se hace necesaria una estandarización.</p> </li> </ol> <p>new!</p> <ol> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.4. El lenguaje de definición de datos Versiones de SQL</p> <p>SQL-86 Es el primer estándar. Fue publicado por ANSI. ISO lo confirmó en 1987, por lo que a veces se denomina SQL-87. SQL-89 y SQL-92 Fueron diferentes revisiones del lenguaje para agregarles características que ya estaban es uso en diferentes SGBD. SQL-99 (o SQL3) Incluye tiggers, recursión y orientación a objetos. SQL-2003 Introduce XML y otras estandarizaciones.</p> </li> </ol> <p>new!</p> <ol> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.4. El lenguaje de definición de datos</p> <p>Dialectos de SQL Los SGBD comerciales se ajustan sólo aproximadamente al estándar. Además, todos incluyen mejoras y añadidos sobre SQL para superar a los competidores. Esos añadidos no son compatibles entre diferentes SGBD: Podemos hablar de “dialectos” de SQL Si queremos que nuestra base de datos sea portable, hay que evitar usar los añadidos y respetar al máximo el estándar. Con el tiempo, los añadidos de mayor éxito pueden acabar incorporados al estándar. En cualquier caso, lo habitual es tener que hacer pequeños ajustes al código SQL para hacerlo funcionar con varios SGBD.</p> </li> </ol> <p>new!</p> <ol> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.4. El lenguaje de definición de datos El DDL de SQL</p> <p>El DDL (lenguaje de definición de datos) sólo es un subconjunto de SQL formado por tres instrucciones: CREATE DROP ALTER</p> </li> </ol> <p>p. 104</p> <ol> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.5. Definición de la base de datos 3.5 Definición de la base de datos: CREACIÓN</p> <p>Sintaxis: CREATE { DATABASE | SCHEMA } [IF NOT EXISTS] nombre_db [especificación_create [,espec_create] … ] especificación_create: [DEFAULT] CHARACTER SET juego_caracteres | [DEFAULT] COLLATE nombre_colación Ejemplo: CREATE DATABASE videoclub CHARACTER SET utf8 COLLATE utf8_spanish_ci;</p> </li> </ol> <p>p. 105</p> <ol> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.5. Definición de la base de datos</p> <p>Después de crear la base de datos, con el intérprete de MySQL se puede comprobar que se ha creado correctamente: mysql&gt; SHOW DATABASES; Para utilizar la base de datos hay que teclear: mysql&gt; USE nombre_bd;</p> </li> </ol> <p>Act. 3.6 (p. 106)</p> <ol> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.5. Definición de la base de datos Definición de la base de datos: MODIFICACIÓN</p> <p>Sintaxis: ALTER DATABASE nombre_db {COLLATE nueva_colación | CHARACTER SET nuevo_cs } Una limitación de MySQL es que no permite modificar casi nada de la base de datos una vez creada. En esto, otros SGBD como Oracle son más flexibles.</p> </li> </ol> <p>p. 110</p> <ol> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.5. Definición de la base de datos Definición de la base de datos: BORRADO</p> <p>Sintaxis: DROP DATABASE nombre_db También se pueden borrar todos los ficheros de la DB manualmente, pero esto puede confundir al SGBD. Una vez eliminada la base de datos, es irrecuperable a menos que tengamos una copia de seguridad.</p> </li> </ol> <p>p. 111</p> <ol> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.6. Definición de la estructura de la base de datos 3.6 Definición de la estructura de la base de datos 3.6.a) Creación de tablas CREATE [TEMPORARY] TABLE [esquema.]nombre_tabla [(definición_create,…)] [opciones_tabla]</p> <p>definición_create: definición_columna | [CONSTRAINT [símbolo]] PRIMARY KEY (nombre_columna,…) | [CONSTRAINT [símbolo]] FOREIGN KEY (i,…) [definición_referencia]</p> </li> </ol> <p>p. 111</p> <ol> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.6. Definición de la estructura de la base de datos</p> <p>definición_columna: nombre_columna tipo_datos [NOT NULL|NULL] [DEFAULT valor] [UNIQUE [KEY] | [PRIMARY] KEY] [definición_referencia] definición_referencia: REFERENCES nombre_tabla [(nombre_columna,…)] [ON DELETE {CASCADE | SET NULL | NO ACTION} ] [ON UPDATE {CASCADE | SET NULL | NO ACTION} ]</p> </li> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.6. Definición de la estructura de la base de datos</p> <p>opciones_tabla (para MySQL): ENGINE = nombre_motor | AUTO_INCREMENT = valor | [DEFAULT] CHARACTER SET juego_caracteres [COLLATE col] | CHECKSUM = {0 | 1} | COMMENT = ‘string’ | MAX_ROWS = valor | MIN_ROWS = valor</p> </li> </ol> <p>Act. 3.8 (p. 115) (sólo mysql)</p> <ol> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.6. Definición de la estructura de la base de datos Restricciones de integridad al crear tablas Las restricciones de integridad del modelo relacional pueden ayudan a evitar inconsistencias en los datos.</p> <p>Hay básicamente tres tipos de restricciones: Integridad referencial Eliminación en cascada Actualización en cascada Podemos elegir usarlas o no: Si no se usan, nos arriesgamos a tener inconsistencias: la base de datos dejaría de ser útil. Si se usan, la base de datos nos impedirá hacer ciertas cosas, lo que puede restar flexibilidad.</p> </li> </ol> <p>p. 113</p> <ol> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.6. Definición de la estructura de la base de datos</p> <p>Integridad referencial Nos asegura que los registros de tablas relacionadas son coherentes</p> </li> </ol> <p>cod_autor</p> <p>nombre</p> <p>1</p> <p>2</p> <p>Joseph Conrad</p> <p>Isaac Asimov</p> <p>Tabla</p> <p>Libros</p> <p>Tabla</p> <p>Autores</p> <p>cod_libro</p> <p>título</p> <p>482</p> <p>Lord Jim</p> <p>cod_autor</p> <p>1</p> <p>2</p> <p>3</p> <p>4</p> <p>484</p> <p>Ana Karenina</p> <p>485</p> <p>Misericordia</p> <p>483</p> <p>Fundación</p> <p>Lev Tolstói</p> <p>3</p> <p>B. Pérez Galdós</p> <p>4</p> <p>cod_autor</p> <p>nombre</p> <p>1</p> <p>2</p> <p>Joseph Conrad</p> <p>Isaac Asimov</p> <p>Tabla</p> <p>Libros</p> <p>Tabla</p> <p>Autores</p> <p>cod_libro</p> <p>título</p> <p>482</p> <p>Lord Jim</p> <p>cod_autor</p> <p>1</p> <p>2</p> <p>32</p> <p>4</p> <p>484</p> <p>Ana Karenina</p> <p>485</p> <p>Misericordia</p> <p>483</p> <p>Fundación</p> <p>Lev Tolstói</p> <p>3</p> <p>B. Pérez Galdós</p> <p>4</p> <p>Sin integridad referencial puede ocurrir esto:</p> <p>¡No está relacionado con ningún registro!</p> <p>new!</p> <ol> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.6. Definición de la estructura de la base de datos</p> <p>Es muy grave que ocurra una inconsistencia como la de la figura anterior: No hay modo de saber quién es el autor del libro. ¡El dato se ha perdido irremediablemente! La base de datos pierde su razón de ser si deja de contener datos válidos. La integridad referencial impide que se dé esa circunstancia: El propio SGBD prohibirá insertar en la tabla de Libros un código de autor que no exista en la tabla de Autores. Problema: debemos dar de alta a todos los autores antes de dar de alta a los libros.</p> </li> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.6. Definición de la estructura de la base de datos Borrado en cascada</p> <p>¿Qué ocurre si borramos un registro de la tabla de Autores?</p> </li> </ol> <p>cod_autor</p> <p>nombre</p> <p>1</p> <p>2</p> <p>Joseph Conrad</p> <p>Isaac Asimov</p> <p>Tabla</p> <p>Libros</p> <p>Tabla</p> <p>Autores</p> <p>cod_libro</p> <p>título</p> <p>482</p> <p>Lord Jim</p> <p>cod_autor</p> <p>1</p> <p>2</p> <p>3</p> <p>4</p> <p>484</p> <p>Ana Karenina</p> <p>485</p> <p>Misericordia</p> <p>483</p> <p>Fundación</p> <p>Lev Tolstói</p> <p>3</p> <p>B. Pérez Galdós</p> <p>4</p> <p>cod_autor</p> <p>nombre</p> <p>1</p> <p>2</p> <p>Joseph Conrad</p> <p>Isaac Asimov</p> <p>Tabla</p> <p>Libros</p> <p>Tabla</p> <p>Autores</p> <p>cod_libro</p> <p>título</p> <p>482</p> <p>Lord Jim</p> <p>cod_autor</p> <p>1</p> <p>2</p> <p>3</p> <p>4</p> <p>484</p> <p>Ana Karenina</p> <p>485</p> <p>Misericordia</p> <p>483</p> <p>Fundación</p> <p>Lev Tolstói</p> <p>3</p> <p>¡El libro 485 ha perdido su referencia!</p> <p>Vamos a borrar este registro</p> <p>new!</p> <ol> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.6. Definición de la estructura de la base de datos</p> <p>Si tenemos activada la integridad referencial, el SGBD nos prohibirá hacer ese borrado. Pero si, además, tenemos activada la eliminación en cascada, el SGBD sí que nos dejará borrar el registro. Se borrará el registro 4 en la tabla de Autores. Y también se borrarán todos los registros de la tabla de Libros que estén relacionados con ese autor. Así se mantiene la coherencia, pero, ¡cuidado!: podemos perder datos que no queríamos borrar.</p> </li> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.6. Definición de la estructura de la base de datos</p> <p>Al borrar un autor con eliminación en cascada…</p> </li> </ol> <p>cod_autor</p> <p>nombre</p> <p>1</p> <p>2</p> <p>Joseph Conrad</p> <p>Isaac Asimov</p> <p>Tabla</p> <p>Libros</p> <p>Tabla</p> <p>Autores</p> <p>cod_libro</p> <p>título</p> <p>482</p> <p>Lord Jim</p> <p>cod_autor</p> <p>1</p> <p>2</p> <p>3</p> <p>4</p> <p>484</p> <p>Ana Karenina</p> <p>485</p> <p>Misericordia</p> <p>483</p> <p>Fundación</p> <p>Lev Tolstói</p> <p>3</p> <p>B. Pérez Galdós</p> <p>4</p> <p>cod_autor</p> <p>nombre</p> <p>1</p> <p>2</p> <p>Joseph Conrad</p> <p>Isaac Asimov</p> <p>Tabla</p> <p>Libros</p> <p>Tabla</p> <p>Autores</p> <p>cod_libro</p> <p>título</p> <p>482</p> <p>Lord Jim</p> <p>cod_autor</p> <p>1</p> <p>2</p> <p>3</p> <p>484</p> <p>Ana Karenina</p> <p>483</p> <p>Fundación</p> <p>Lev Tolstói</p> <p>3</p> <p>…también se borran TODOS sus libros:</p> <p>Vamos a borrar este registro</p> <ol> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.6. Definición de la estructura de la base de datos Modificación en cascada:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> ¿Qué ocurre si modificamos la clave de un registro de la tabla de Autores?
</code></pre></div> </div> </li> </ol> <p>cod_autor</p> <p>nombre</p> <p>1</p> <p>2</p> <p>Joseph Conrad</p> <p>Isaac Asimov</p> <p>Tabla</p> <p>Libros</p> <p>Tabla</p> <p>Autores</p> <p>cod_libro</p> <p>título</p> <p>482</p> <p>Lord Jim</p> <p>cod_autor</p> <p>1</p> <p>2</p> <p>3</p> <p>4</p> <p>484</p> <p>Ana Karenina</p> <p>485</p> <p>Misericordia</p> <p>483</p> <p>Fundación</p> <p>Lev Tolstói</p> <p>3</p> <p>B. Pérez Galdós</p> <p>4</p> <p>cod_autor</p> <p>nombre</p> <p>1</p> <p>2</p> <p>Joseph Conrad</p> <p>Isaac Asimov</p> <p>Tabla</p> <p>Libros</p> <p>Tabla</p> <p>Autores</p> <p>cod_libro</p> <p>título</p> <p>482</p> <p>Lord Jim</p> <p>cod_autor</p> <p>1</p> <p>2</p> <p>3</p> <p>4</p> <p>484</p> <p>Ana Karenina</p> <p>485</p> <p>Misericordia</p> <p>483</p> <p>Fundación</p> <p>Lev Tolstói</p> <p>3</p> <p>¡El libro 485 ha perdido su referencia!</p> <p>Vamos a cambiar la clave de este registro</p> <p>B. Pérez Galdós</p> <p>5</p> <p>Son distintos</p> <p>new!</p> <ol> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.6. Definición de la estructura de la base de datos</p> <p>Si tenemos activada la integridad referencial, el SGBD nos prohibirá hacer esa modificación. Pero si, además, tenemos activada la modificación en cascada, el SGBD sí que nos dejará cambiar el registro. Se modificará la clave del registro 4 en la tabla de Autores. Y también se modificarán todas las claves ajenas de la tabla de Libros que estén relacionadas con ese autor. Por tanto, es un caso muy parecido al de eliminación en cascada, aunque menos destructivo.</p> </li> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.6. Definición de la estructura de la base de datos</p> <p>Si tenemos activada la modificación en cascada…</p> </li> </ol> <p>cod_autor</p> <p>nombre</p> <p>1</p> <p>2</p> <p>Joseph Conrad</p> <p>Isaac Asimov</p> <p>Tabla</p> <p>Libros</p> <p>Tabla</p> <p>Autores</p> <p>cod_libro</p> <p>título</p> <p>482</p> <p>Lord Jim</p> <p>cod_autor</p> <p>1</p> <p>2</p> <p>3</p> <p>4</p> <p>484</p> <p>Ana Karenina</p> <p>485</p> <p>Misericordia</p> <p>483</p> <p>Fundación</p> <p>Lev Tolstói</p> <p>3</p> <p>B. Pérez Galdós</p> <p>4</p> <p>cod_autor</p> <p>nombre</p> <p>1</p> <p>2</p> <p>Joseph Conrad</p> <p>Isaac Asimov</p> <p>Tabla</p> <p>Libros</p> <p>Tabla</p> <p>Autores</p> <p>cod_libro</p> <p>título</p> <p>482</p> <p>Lord Jim</p> <p>cod_autor</p> <p>1</p> <p>2</p> <p>3</p> <p>5</p> <p>484</p> <p>Ana Karenina</p> <p>485</p> <p>Misericordia</p> <p>483</p> <p>Fundación</p> <p>Lev Tolstói</p> <p>3</p> <p>…el SGBD modificará las claves ajenas en Libros:</p> <p>Vamos a cambiar la clave de este registro</p> <p>B. Pérez Galdós</p> <p>5</p> <p>Siguen relacionados</p> <ol> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.6. Definición de la estructura de la base de datos Tipos de datos en MySQL</p> <p>TINYINT, SMALLINT, MEDIUMINT, INT, BIGINT: números enteros de 8, 16, 24, 32 y 64 bits. FLOAT, DOUBLE: números reales de precisión simple (E±38) y doble (E±308). DECIMAL(num-dígitos, num-decimales): números reales. “num-dígitos” es el número total de dígitos. DATE: Fecha. El formato suele ser ‘aaaa-mm-dd’ TIME: Hora. El formato suele ser ‘hh:mm:ss’ DATETIME: fecha y hora. El formato generalmente es ‘aaaa-mm-dd hh:mm:ss’ CHAR (num-caracteres): cadena de caracteres. La longitud puede ir de 1 a 255. Los caracteres no utilizados se rellenan con espacios. VARCHAR(num-cars), VARCHAR2(num-cars): cadena de caracteres de longitud máxima 2000 o 4000. Sólo se almacenan los caracteres realmente utilizados. BLOB, TEXT: cadenas de hasta 216 bytes. El primero almacena en formato binario y el segundo en formato carácter. TINYTEXT, LONGTEXT: cadenas de hasta 28 y 232 caracteres. También existen los correspondientes TINYBLOB y BIGBLOB. BINARY(num-bytes): números binarios de hasta 255 bytes.</p> </li> </ol> <p>p. 116</p> <ol> <li> <p>Creación de bases de datos relacionales: el diseño físico 3.6. Definición de la estructura de la base de datos 3.6.b) Modificación de tablas ALTER TABLE nombre_tabla especificación_alter [,especificación_alter] …</p> <p>especificación_alter: ADD definición_columna [FIRST | AFTER columna] | ADD (definición_columna, …) | ADD [CONSTRAINT símbolo]] PRIMARY KEY (columna,…) | ADD [CONSTRAINT símbolo]] UNIQUE (columna,…) | ADD [CONSTRAINT símbolo]] FOREIGN KEY (columna,…) [definición_referencia] (continúa en pág. siguiente)</p> </li> </ol> <p>p. 120</p> <ol> <li>Creación de bases de datos relacionales: el diseño físico 3.6. Definición de la estructura de la base de datos (viene de pág. anterior) | CHANGE [COLUMN] nombre_anterior definición_columna [FIRST|AFTER nombre_columna] | RENAME COLUMN nombre_anterior TO nombre_nuevo | MODIFY definición_columna [FIRST | AFTER columna] | DROP COLUMN columna | DROP PRIMARY KEY | DROP FOREIGN KEY símbolo | opciones_tabla</li> <li>Creación de bases de datos relacionales: el diseño físico 3.6. Definición de la estructura de la base de datos 3.6.c) Borrado de tablas DROP [TEMPORARY] TABLE nombre_tabla [,nombre_tabla] … 3.6.d) Renombrado de tablas RENAME TABLE nombre_tabla TO nuevo_nombre [, nombre_tabla TO nuevo_nombre] …</li> </ol> <p>p. 122</p> <p>p. 122</p> <ol> <li>Creación de bases de datos relacionales: el diseño físico 3.6. Definición de la estructura de la base de datos Prácticas</li> </ol> <p>Práctica 3.5 (p. 128)</p> <p>Práctica 3.7 (p. 129)</p> <p>Práctica 3.8 (p. 129)</p> <p>Prácticas adicionales (aula virtual)</p> <p>4.</p> <p>REALIZACIÓN DE CONSULTAS EN MYSQL</p> <p>4.0.</p> <p>CONTENIDOS</p> <p></p> <p>Sentencia SELECT</p> <p></p> <p>Consultas básicas, filtros y ordenación</p> <p></p> <p>Consultas resumen</p> <p></p> <p>Subconsultas</p> <p></p> <p>Consultas multitabla. Componentes internas y externas</p> <p></p> <p>Consultas reflexivas</p> <p></p> <p>Consultas con tablas derivadas</p> <p>4.1.</p> <p>LENGUAJE DML</p> <p>Las sentencias DML de SQL son:</p> <p></p> <p>SELECT: extrae información de una o varias tablas</p> <p></p> <p>INSERT: inserta registros en tabla</p> <p></p> <p>DELETE: borra registros en tabla</p> <p></p> <p>UPDATE: modifica registros en tabla</p> <p>4.2.</p> <p>SENTENCIA SELECT</p> <p>EJEMPLOS:</p> <p>1.</p> <p>Consulta básica:</p> <p>Ejemplo: muestra todos los registros de la tabla empleados</p> <p>SELECT * FROM empleados;</p> <p>2.</p> <p>Consulta que obtiene información filtrada de múltiples tablas , usando</p> <p>relaciones entre tablas, incluso varias tablas virtuales creadas a partir de</p> <p>una consulta</p> <p>Ejemplo: obtener el total de los pedidos d los clientes de una tienda</p> <p>SELECT NombreCliente, Tot.Cantidad</p> <p>FROM Clientes, Pedidos,</p> <p>(SELECT SUM(Cantidad*PrecioUnidad) AS Cantidad, NumeroPedido</p> <p>FROM DetallePedidos GROUP BY NumeroPedido) Tot</p> <p>WHERE Clientes.NumeroCliente=Pedidos.NumeroCliente</p> <p>AND Pedidos.NumeroPedido=Tot.NumeroPedido</p> <p>ORDER BY Cantidad;</p> <p>4.3.</p> <p>CONSULTAS BÁSICAS</p> <p>SELECT *DISTINCT+ campo1, campo2,… *expresión+</p> <p>FROM tabla</p> <p></p> <p>DISTINCT es opcional, suprime los resultados repetidos</p> <p></p> <p>campo1, campo2,… son los campos o columnas de la tabla que usaremos para</p> <p>extraer</p> <p>información.</p> <p>Si</p> <p>deseamos</p> <p>todos</p> <p>los</p> <p>campos</p> <p>debemos</p> <p>indicarlo</p> <p>mediante el carácter comodín *.</p> <p></p> <p>Expresión</p> <p>es</p> <p>una</p> <p>fórmula</p> <p>compuesta</p> <p>por</p> <p>operadores(</p> <p>+,-,*,/)</p> <p>o</p> <p>funciones(SUM, AVG, MAX, MIN, COUNT) calculados sobre los campos de la</p> <p>tabla</p> <p></p> <p>Ejemplos pág. 136 del libro escanear</p> <p>o</p> <p>Destacar la expresión 1+5,</p> <p>o</p> <p>Destacar función CONCAT (marca, modelo) AS coche FROM vehiculos</p> <p>Comentario [a1]:</p> <p>Tabla virtual</p> <p>Comentario [a2]:</p> <p>Las tablas de</p> <p>pedidos y clientes están relacionadas</p> <p>por el campo NumeroCliente</p> <p></p> <p>Concatena los campos marca y modelo y los reúne en una</p> <p>columna que llama coche.</p> <p></p> <p>CONCAT En Oracle sólo admite 2 parámetros pero en MySQL</p> <p>se puede concatenar múltiples parámetros</p> <p></p> <p>Para</p> <p>concatenar</p> <p>varios</p> <p>parámetros</p> <p>en</p> <p>Oracle</p> <p>usamos</p> <p>el</p> <div class="table-wrapper"><table> <tbody> <tr> <td>operador relacional OR</td> <td> </td> </tr> </tbody> </table></div> <p>ACTIVIDAD 4.1: Pag 137</p> <p>1.</p> <p>Crear</p> <p>tabla</p> <p>de</p> <p>Mascotas</p> <p>(Codigo,</p> <p>Nombre,</p> <p>Especie,</p> <p>Raza,</p> <p>Edad,</p> <p>Sexo)</p> <p>mediante</p> <p>la</p> <p>declaración:</p> <p>CREATE TABLE Mascotas(</p> <p>Codigo integer PRIMARY KEY,</p> <p>Nombre varchar (20) NOT NULL,</p> <p>Especie varchar (20) NOT NULL,</p> <p>Raza varchar (20) NOT NULL,</p> <p>Edad integer NOT NULL,</p> <p>Sexo varchar (2) NOT NULL);</p> <p>2.</p> <p>Introduce 6 registros(inventados) mediante la sentencia</p> <p>INSERT INTO Mascotas VALUES</p> <p>(‘kira’, “perro”, “doberman”, 3, “F”), (otro registro),(otro registro);</p> <p>3.</p> <p>Realiza las consultas</p> <p>3.1.</p> <p>Muestra el nombre y la especie de todas las mascotas</p> <p>3.2.</p> <p>Muestra el nombre y el sexo de las mascotas poniendo un alias a los campos (por</p> <p>ejemplo la letra inicial)</p> <p>3.3.</p> <p>Muestra el nombre y la fecha de nacimiento aproximada de las mascotas. Usa la</p> <p>función date_sub y now. Buscar en el manual de MySQL la sintaxis de estas funciones.</p> <p>4.4.</p> <p>FILTROS</p> <p></p> <p>Son las condiciones que deben cumplir los registros de las tablas</p> <p></p> <p>Se utiliza la cláusula WHERE</p> <p></p> <p>Ejemplo: WHERE marca=’seat’</p> <p>4.4.1.</p> <p>Expresiones en filtros</p> <p></p> <p>WHERE expresión</p> <p></p> <p>Expresión puede contener</p> <p></p> <p>Operandos: pueden ser valores constantes que ya aparecen en la tabla o</p> <p>valores calculados mediante operadores</p> <p></p> <p>Operadores</p> <p>1.</p> <p>Aritméticos:+,-,*,/,%(calcula el resto de la división)</p> <p>2.</p> <p>Relacionales:&gt;,&lt;,&gt;=,&lt;=,&lt;&gt;,=</p> <p>3.</p> <p>Lógicos: AND, OR, NOT</p> <p>4.</p> <p>Funciones: SUM, MAX, MIN, AVG, COUNT, CONCAT, DATE_ADD, LEFT,</p> <p>RIGHT</p> <p></p> <p>Ejemplos de la BD de la NBA pag 141</p> <p>1.</p> <p>Selecciona los nombres de los jugadores de los Lakers</p> <p>SELECT Nombre FROM jugadores</p> <p>WHERE Nombre_equipo=’Lakers’;</p> <p>2.</p> <p>Selecciona los jugadores españoles de los Lakers</p> <p>SELECT codigo, Nombre, Altura</p> <p>Comentario [a3]:</p> <p>expresión</p> <p>FROM jugadores WHERE Nombre_equipo=’Lakers’</p> <p>AND Procedencia=’Spain’;</p> <p>3.</p> <p>Selecciona los jugadores españoles y eslavos de los Lakers</p> <p>SELECT codigo, Nombre, Altura</p> <p>FROM jugadores WHERE Nombre_equipo=’Lakers’</p> <p>AND (Procedencia=’Spain’ OR Procedencia = ‘Slovenia’);</p> <p>4.4.2.</p> <p>Filtros con operador de pertenencia a conjuntos IN</p> <p></p> <p>Permite comprobar si un campo tiene algún valor contenido en una lista</p> <p>de valores</p> <p></p> <p>Campo IN ( Valor1, Valor2, …, ValorN)</p> <p></p> <p>Ejemplo: seleccionar los jugadores españoles, eslovenos o serbios de los</p> <p>Lakers</p> <p>SELECT codigo, Nombre, Altura</p> <p>FROM jugadores WHERE Nombre_equipo=’Lakers’</p> <p>AND Procedencia IN (‘Spain’, ‘Slovenia’, ‘Serbia &amp; Montenegro’);</p> <p>4.4.3.</p> <p>Filtros con operador de rango BETWEEN</p> <p>Permite seleccionar los registros que están incluidos entre un rango de 2 valores</p> <p></p> <p>Campo BETWEEN Valor1 AND Valor2</p> <p></p> <p>Ejemplo:</p> <p>Seleccionar</p> <p>los</p> <p>jugadores</p> <p>de</p> <p>la</p> <p>NBA</p> <p>cuyo</p> <p>peso</p> <p>esté</p> <p>comprendido entre 270 y 300 libras</p> <p>SELECT Nombre, Nombre_equipo</p> <p>FROM jugadores</p> <p>WHERE Peso BETWEEN 270 AND 300;</p> <p>4.4.4.</p> <p>Filtros con test IS, LIKE</p> <p></p> <p>de valor nulo: operador IS null , IS NOT null: Permite comprobar si un campo</p> <p>es o no nulo</p> <p></p> <p>ejemplo1: comprobar los jugadores cuya procedencia es desconocida (null)</p> <p>SELECT Nombre, Nombre_equipo</p> <p>FROM jugadores</p> <p>WHERE Procedencia IS null;</p> <p></p> <p>ejemplo2: comprobar los jugadores cuya procedencia es conocida (not null)</p> <p>SELECT Nombre, Nombre_equipo</p> <p>FROM jugadores</p> <p>WHERE Procedencia IS NOT null;</p> <p></p> <p>de</p> <p>patrón:</p> <p>operador</p> <p>LIKE</p> <p>:</p> <p>Selecciona</p> <p>los</p> <p>registros</p> <p>si</p> <p>cumplen</p> <p>las</p> <p>características</p> <p>indicadas</p> <p>en</p> <p>el</p> <p>patrón.</p> <p>En</p> <p>el</p> <p>patrón</p> <p>se</p> <p>pueden</p> <p>usar</p> <p>los</p> <p>caracteres comodín % (un carácter) _(grupo de caracteres)</p> <p>ejemplo3:</p> <p>Seleccionar</p> <p>de</p> <p>la</p> <p>tabla</p> <p>de</p> <p>vehículos</p> <p>aquellos</p> <p>vehículos</p> <p>cuyo</p> <p>modelo sea ‘tdi’</p> <p>SELECT * FROM vehiculos</p> <p>WHERE modelo LIKE ‘%tdi%’;</p> <p>4.4.5.</p> <p>Filtros para limitar el número de registros LIMIT</p> <p></p> <p>No es un filtro estándar, pues varía de unos SGBD a otros</p> <p></p> <p>En MySQL</p> <p>LIMIT [desplazamiento,] nfilas</p> <p>Ejemplo1: devuelve las 4 primeras filas</p> <p>SELECT nombre, Nombre_equipo FROM jugadores LIMIT 4;</p> <p>Ejemplo2: devuelve las 3 primeras filas a partir de la sexta</p> <p>SELECT nombre, Nombre_equipo FROM jugadores LIMIT 5,3 ;</p> <p>4.4.6.</p> <p>Filtros para ordenación ORDER BY</p> <p></p> <p>Ordena</p> <p>los</p> <p>resultados</p> <p>por</p> <p>campo,</p> <p>expresión</p> <p>o</p> <p>posición</p> <p>ascendente</p> <p>o</p> <p>descendentemente</p> <p></p> <div class="table-wrapper"><table> <tbody> <tr> <td>ORDER BY campo(s) o expression o posición [ASC</td> <td>DESC]</td> </tr> </tbody> </table></div> <p>Ejemplo1: pag146: Obtener los equipos de la conferencia oeste de la NBA por</p> <p>división</p> <p>SELECT Nombre, Division</p> <p>FROM equipos WHERE Conferencia=’West’</p> <p>ORDER BY Division ASC;</p> <p>Ejemplo2: pag147: Obtener los equipos de la conferencia oeste de la NBA por</p> <p>división ascendentemente y por nombre descendentemente</p> <p>SELECT Nombre, Division</p> <p>FROM equipos WHERE Conferencia=’West’</p> <p>ORDER BY Division ASC, Nombre ASC;</p> <p>4.5.</p> <p>CONSULTAS RESUMEN</p> <p></p> <p>Generan consultas complejas que resumen la información</p> <p></p> <p>Realizan cálculos sobre los datos mediante funciones de columna</p> <p></p> <p>Las funciones más utilizadas son:</p> <p>o</p> <p>SUM(expresión) p</p> <p>o</p> <p>AVG(expresión)</p> <p>o</p> <p>MAX(expresión)</p> <p>o</p> <p>MIN(expresión)</p> <p>o</p> <p>COUNT (expresión)</p> <p>Donde expresión puede ser: el nombre de un campo, *, expresión con operadores</p> <p>Comentario [a4]:</p> <p>a partir de qué fila</p> <p>Comentario [a5]:</p> <p>número de filas a</p> <p>devolver</p> <p>Comentario [a6]:</p> <p>la primera fila</p> <p>ocupa la posición 0</p> <p>Ejemplo1: selecciona el jugador más pesado de la NBA</p> <p>SELECT MAX(peso) FROM jugadores;</p> <p>Ejemplo2: selecciona el jugador más bajito de la NBA</p> <p>SELECT MIN(altura) FROM jugadores;</p> <p>Ejemplo3:</p> <p>selecciona</p> <p>el</p> <p>número</p> <p>de</p> <p>jugadores</p> <p>de</p> <p>los</p> <p>Lakers=</p> <p>¿Cuántos</p> <p>jugadores tiene el equipo de los Lakers?</p> <p>SELECT COUNT(*)</p> <p>FROM jugadores</p> <p>WHERE Nombre_equipo=’Lakers’;</p> <p></p> <p>GROUP BY: Permite agrupar registros que tienen una o varias columnas con el</p> <p>mismo valor. Se coloca antes de ORDER BY. En el enunciado de la consulta</p> <p>suele decir cada.</p> <p>Ejemplo1: ¿Cuánto pesa el jugador más pesado de cada equipo?</p> <p>SELECT Nombre_equipo, MAX(peso)</p> <p>FROM jugadores</p> <p>GROUP BY Nombre_equipo;</p> <p>Ejemplo2: ¿Cuántos equipos tiene cada conferencia en la NBA?</p> <p>SELECT COUNT(*), conferencia</p> <p>FROM equipos</p> <p>GROUP BY conferencia;</p> <p>Ejemplo3: ¿Cuánto pesan de media los jugadores en España, Francia e Italia?</p> <p>SELECT AVG(peso), procedencia</p> <p>FROM jugadores</p> <p>WHERE procedencia IN (‘Spain’,’Italy’,’France’)</p> <p>GROUP BY procedencia;</p> <p>4.6.</p> <p>FILTROS DE GRUPOS :HAVING</p> <p></p> <p>Restringe los grupos a la condición especificada mediante un filtro</p> <p></p> <p>Se coloca después de GROUP BY</p> <p></p> <p>Su sintaxis es: HAVING filtro de grupos</p> <p>Ejemplo1: Seleccionar los equipos de la NBA cuyos jugadores pesen de media</p> <p>más de 228 libras</p> <p>SELECT Nombre_equipo</p> <p>FROM jugadores</p> <p>GROUP BY Nombre_equipo</p> <p>HAVING AVG(peso)&gt;228</p> <p>ORDER BY AVG(peso);</p> <p>Ejemplo2: Seleccionar qué equipos de la NBA tienen más de 1 jugador</p> <p>español</p> <p>SELECT Nombre_equipo, COUNT(*)</p> <p>FROM jugadores</p> <p>WHERE procedencia=’Spain’</p> <p>GROUP BY Nombre_equipo</p> <p>HAVING COUNT(*)&gt;1;</p> <p>4.7.</p> <p>SUBCONSULTAS</p> <p></p> <p>Se utilizan para realizar filtrados con los datos de otra consulta</p> <p></p> <p>Los filtros se pueden utilizar tanto en la cláusula WHERE como en la cláusula</p> <p>HAVING</p> <p></p> <p>Ejemplo: seleccionar los nombres de los jugadores de la división ‘SouthEast’</p> <p>SELECT nombre FROM jugadores</p> <p>WHERE Nombre_equipo IN</p> <p>(SELECT nombre FROM equipos WHERE division=‘SouthEast’);</p> <p>TEST DE COMPARACIÓN =, &lt;&gt;, &gt;=,&lt;=, &lt;,&gt;</p> <p></p> <p>La subconsulta debe estar al lado derecho del operador de comparación</p> <p>Campo &lt; subconsulta y subconsulta &gt; campo</p> <p></p> <p>Ejemplo: Consultar el nombre del jugador de mayor altura de la NBA</p> <p>SELECT nombre FROM jugadores</p> <p>WHERE altura=</p> <p>(SELECT MAX(altura) FROM jugadores);</p> <p>TEST DE PERTENENCIA A UN CONJUNTO: IN</p> <p></p> <p>Filtra los registros cuya expresión coincida con algún valor producido por la</p> <p>subconsulta</p> <p></p> <p>Ejemplo:</p> <p>extraer</p> <p>las</p> <p>divisiones</p> <p>de</p> <p>la</p> <p>NBA</p> <p>donde</p> <p>juegan</p> <p>los</p> <p>jugadores</p> <p>españoles</p> <p>SELECT división FROM equipos</p> <p>WHERE nombre IN</p> <p>(SELECT Nombre_equipo FROM jugadores</p> <p>WHERE procedencia=’Spain’);</p> <p>TEST DE EXISTENCIA: EXISTS y NOT EXISTS</p> <p></p> <p>Filtra los registros de la consulta si existen filas en la subconsulta asociada</p> <p></p> <p>Ejemplo: Seleccionar los equipos que no tengan jugadores españoles</p> <p>SELECT nombre FROM equipos</p> <p>WHERE NOT EXISTS</p> <p>(SELECT Nombre FROM jugadores</p> <p>WHERE equipos.nombre=jugadores. Nombre_equipo</p> <p>AND procedencia=’Spain’);</p> <p>TEST CUANTIFICADOS: ALL y ANY</p> <p></p> <p>Sirven para calcular la relación entre una expresión y todos (ALL), o algunos</p> <p>(ANY) de los registros de una subconsulta</p> <p></p> <p>Ejemplo1: ¿Qué jugadores de la NBA pesan más que todos los jugadores</p> <p>españoles?</p> <p>SELECT nombre, peso FROM jugadores</p> <p>WHERE peso&gt; ALL</p> <p>(SELECT peso FROM jugadores</p> <p>WHERE procedencia=’Spain’);</p> <p></p> <p>Ejemplo2: Consultar las bases (posición=’G’) que pesan más que cualquier</p> <p>pivot (posición=’C’) de la NBA</p> <p>SELECT nombre, peso FROM jugadores</p> <p>WHERE posición=’G’ AND</p> <p>peso &gt; ANY</p> <p>(SELECT peso FROM jugadores</p> <p>WHERE posición=’C’);</p> <p>SUBCONSULTAS ANIDADAS</p> <p></p> <p>Permite explorar la información de forma estructurada</p> <p></p> <p>Utilizan subconsultas para filtrar los resultados de otra(s) subconsultas</p> <p></p> <p>Ejemplo: obtener el nombre de la ciudad donde juega el jugador más alto de</p> <p>la NBA.</p> <p>SELECT ciudad FROM equipos WHERE nombre=</p> <p>(SELECT Nombre_equipo FROM jugadores WHERE altura=</p> <p>(SELECT MAX(altura) FROM jugadores));</p> <p>4.8.</p> <p>CONSULTAS MULTITABLA</p> <p></p> <p>Utilizan información de más de una tabla</p> <p></p> <p>Las tablas deben estar relacionadas por algún campo común</p> <p></p> <p>Aprovechan los campos relacionados de ambas tablas para unirlas (JOIN)</p> <p>mediante un producto cartesiano</p> <p></p> <p>Para especificar los campos de cada tabla: nombre_tabla.nombre_campo</p> <p></p> <p>La referencia a cada tabla se realiza de varias maneras dependiendo del</p> <p>SGBD:</p> <p>o</p> <p>tabla1,tabla2,tabla3, …</p> <p>o</p> <div class="table-wrapper"><table> <tbody> <tr> <td>tabla1 [INNER</td> <td>CROSS] JOIN tabla2 [ON condición]</td> </tr> </tbody> </table></div> <p>o</p> <p>tabla1 LEFT [OUTER] JOIN tabla2 ON condición</p> <p>o</p> <p>tabla1 RIGHT [OUTER] JOIN tabla2 ON condición</p> <p>o</p> <p>tabla1: nombre_tabla[ [AS] alias]</p> <p></p> <p>La unión de las tablas relacionadas se realiza mediante el producto cartesiano</p> <p>que genera como resultado todas las combinaciones posibles entre las filas y</p> <p>columnas de todas las tablas que intervienen</p> <p></p> <p>Pag 159 y 160: al unir las tablas se producen repeticiones, que aprovechamos</p> <p>para filtrar por coincidencias</p> <p></p> <p>Por tanto el producto cartesiano necesita un filtro</p> <p></p> <p>JOIN= PRODUCTO CARTESIANO + FILTRO</p> <p></p> <p>Ejemplo1: BD de MASCOTAS con tablas de propietarios y animales:</p> <p>o</p> <p>Seleccionar todas las filas en las que el dni del propietario coincida</p> <p>con el propietario de la mascota</p> <p>SELECT * FROM animales, propietarios</p> <p>WHERE propietarios.dni=animales.propietario</p> <p></p> <p>Ejemplo2: BD de Jardinería. Abrir para ver relaciones o Pág 161</p> <p>Obtener el listado de pedidos gestionados por cada empleado</p> <p>SELECT Empleados.Nombre, Clientes.NombreCliente, Pedidos.CodigoPedido</p> <p>FROM Clientes, Pedidos, Empleados</p> <p>WHERE Clientes.CodigoCliente=Pedidos.CodigoCliente</p> <p>AND Empleados.CodigoEmpleado=Clientes.CodigoEmpleadoRespVentas</p> <p>ORDER BY Empleados.Nombre;</p> <p></p> <p>Ejemplo3: obtener cuántos pedidos ha gestionado cada empleado (idem al</p> <p>ejemplo 2 pero agrupando por Nombre de empleados y ordenando por</p> <p>NumeroDe Pedidos</p> <p>SELECT Empleados.Nombre, Clientes.NombreCliente, Pedidos.CodigoPedido</p> <p>FROM Clientes, Pedidos, Empleados</p> <p>WHERE Clientes.CodigoCliente=Pedidos.CodigoCliente</p> <p>AND Empleados.CodigoEmpleado=Clientes.CodigoEmpleadoRespVenta</p> <p>GROUP BY Empleados.Nombre</p> <p>ORDER BY NumeroDe Pedidos;</p> <p>4.9.</p> <p>COMPOSICIONES CON JOIN</p> <p></p> <p>Pueden ser: internas, externas y productos cartesianos</p> <p>1.</p> <p>Interna</p> <p></p> <p>De equivalencia: INNER JOIN</p> <p></p> <p>Natural: NATURAL JOIN</p> <p>2.</p> <p>Externa</p> <p></p> <p>De tabla derecha (RIGHT OUTER JOIN)</p> <p></p> <p>De tabla izquierda (LEFT OUTER JOIN)</p> <p></p> <p>Completa (FULL OUTER JOIN)</p> <p>3.</p> <p>Producto Cartesiano: CROSS JOIN</p> <p>INNER JOIN</p> <p></p> <p>Es igual al separador de tablas ‘,’</p> <p></p> <p>Calcula</p> <p>el</p> <p>producto</p> <p>cartesiano</p> <p>de</p> <p>todos</p> <p>los</p> <p>registros</p> <p>de</p> <p>las</p> <p>tablas</p> <p>que</p> <p>combina, de manera que solo selecciona los que satisfacen las condiciones</p> <p>establecidas</p> <p></p> <p>Hay que tener en cuenta que los valores nulos no se combinan</p> <p></p> <p>Las condiciones se establecen con ON Condición</p> <p></p> <p>Ejemplo1:</p> <p>seleccionar</p> <p>los</p> <p>registros</p> <p>de</p> <p>la</p> <p>tabla</p> <p>animales</p> <p>que</p> <p>tengan</p> <p>combinaciones ( coincidencias ) en la tabla propietarios.</p> <p>SELECT * FROM animales INNER JOIN propietarios</p> <p>ON animals.propietario= propietarios.dni;</p> <p>Otra respuesta es:</p> <p>SELECT * FROM animales, propietarios</p> <p>WHERE animales.propietario=propietarios.dni;</p> <p>NATURAL JOIN</p> <p></p> <p>Es una especialización de INNER JOIN</p> <p></p> <p>Compara todas las columnas que tengan el mismo nombre en ambas tablas</p> <p>(todas las tablas especificadas)</p> <p>Ejemplo: pag 165</p> <p>SELECT CodigoEmpleado, Empleados.Nombre, Oficinas.Codigooficina, Oficinas.Ciudad</p> <p>FROM Empleados NATURAL JOIN Oficinas;</p> <p>CROSS JOIN</p> <p></p> <p>Devuelve el producto cartesiano de las tablas (todas las filas y todas las</p> <p>columnas con valores repetidos</p> <p>Ejemplo: pag 166</p> <p>SELECT * FROM animales CROSS JOIN propietarios;</p> <p>Otra respuesta: SELECT * FROM animales, propietarios;</p> <p>OUTER JOIN</p> <p></p> <p>Las composiciones externas no requieren que haya una equivalencia entre las</p> <p>tablas relacionadas</p> <p></p> <p>El registro es seleccionado para ser mostrado aunque no haya otro registro</p> <p>que le corresponda</p> <p></p> <p>Dependiendo</p> <p>de</p> <p>donde</p> <p>se</p> <p>administren</p> <p>los</p> <p>registros</p> <p>que</p> <p>no</p> <p>tienen</p> <p>correspondencia se subdivide en</p> <p>o</p> <p>LEFT OUTER JOIN: los registros que no tienen correspondencia son los</p> <p>que aparecen a la izquierda</p> <p>Ejemplo pag 167:</p> <p>SELECT * FROM animales LEFT OUTER JOIN propietarios</p> <p>ON animales.propietario= propietarios.dni;</p> <p>o</p> <p>RIGHT OUTER JOIN: los registros que no tienen correspondencia son</p> <p>los que aparecen a la derecha</p> <p>Ejemplo pag 167</p> <p>SELECT * FROM animales RIGHT OUTER JOIN propietarios</p> <p>ON animales.propietario= propietarios.dni;</p> <p>o</p> <p>FULL OUTER JOIN: los registros que no tienen correspondencia son los</p> <p>que aparecen tanto a la izquierda como a la derecha</p> <p>SELECT * FROM animales FULL OUTER JOIN propietarios</p> <p>ON animales.propietario= propietarios.dni;</p> <p>MySQL no implementa FULL OUTER JOIN. Para ello realiza la UNION DE LEFT OUTER JOIN</p> <p>Con RIGHT OUTER JOIN.</p> <p>Ejemplo: pag 169</p> <p>SELECT * FROM animales LEFT OUTER JOIN propietarios</p> <p>ON animales.propietario=propietarios.dni</p> <p>UNION</p> <p>SELECT * FROM animales RIGHT OUTER JOIN propietarios</p> <p>ON animales.propietario=propietarios.dni</p> <p>4.10.</p> <p>CONSULTAS REFLEXIVAS</p> <p></p> <p>Son consultas donde se hace una JOIN entre los registros de la misma tabla</p> <p></p> <p>Ejemplo pag 169: obtener el nombre y apellidos de los empleados, junto con</p> <p>el nombre y apellidos de su jefe</p> <p>SELECT CONCAT (emp.Nombre, ‘ ‘ , emp.Apellido1) AS Empleado,</p> <p>CONCAT (jefe.Nombre, ‘ ‘ , jefe.Apellido1) AS jefe</p> <p>FROM Empleados emp INNER JOIN Empleados jefe</p> <p>ON emp.codigoEmpleado=jefe.CodigoJefe;</p> <p>4.11.</p> <p>CONSULTAS CON TABLAS DERIVADAS (INLINE VIEWS)</p> <p></p> <p>Obtiene información relacionada de forma más avanzada</p> <p></p> <p>Utilizan sentencias SELECT en la cláusula FROM en lugar de nombres de tablas</p> <p></p> <p>Hay que distinguir entre la tabla derivada( tabla temporal) que tiene un alias</p> <p>para distinguirla de la tabla principal</p> <p></p> <p>Ejemplo: BD de jardinería. Obtener el importe del pedido de menor coste de</p> <p>todos los pedidos.</p> <p>o</p> <p>Se debe obtener el total de todos los pedidos y después sobre los</p> <p>resultados se obtendrá el valor menor</p> <p>SELECT MIN(total) FROM</p> <p>(SELECT SUM(Cantidad*PrecioUnidad) AS total, CodigoPedido</p> <p>FROM DetallePedidos</p> <p>GROUP BY CodigoPedido)</p> <p>AS TotalPedidos;</p> <p>PRÁCTICAS DEL LIBRO PAG 176</p> <p>PRÁCTICAS RESUELTAS</p> <p>PRÁCTICAS PROPUESTAS</p> <p>Comentario [a7]:</p> <p>alias de</p> <p>Empleado, es como una tabla virtual</p> <p>Comentario [a8]:</p> <p>alias de jefe, tabla</p> <p>virtual para la consulta reflexiva</p> <p>Comentario [a9]:</p> <p>es la tabla</p> <p>derivada formada por el resultado de la</p> <p>consulta entre paréntesis</p> <p>TEMA 5: TRATAMIENTO DE LOS DATOS</p> <p>CONTENIDOS:</p> <p></p> <p>Herramientas gráficas</p> <p></p> <p>Sentencias para insertar, modificar y borrar registros</p> <p>o</p> <p>INSERT</p> <p>o</p> <p>UPDATE</p> <p>o</p> <p>DELETE</p> <p></p> <p>Transacciones</p> <p></p> <p>Acceso concurrente a los datos</p> <p></p> <p>Vistas</p> <p></p> <p>Usuarios</p> <p></p> <p>Privilegios</p> <p>1.</p> <p>HERRAMIENTAS GRÁFICAS PARA LA EDICIÓN DE DATOS</p> <p>Se genera el código SQL automáticamente</p> <p>ACCESS</p> <p></p> <p>Creación de formularios</p> <p>o</p> <p>Usando asistentes</p> <p>o</p> <p>En vista diseño</p> <p></p> <p>PRÁCTICA: En Cursaccess01:</p> <p>1.</p> <p>elaborar formularios usando asistente:</p> <p>o</p> <p>crear, formulario, asistente para formulario</p> <p>o</p> <p>seguir pasos</p> <p>2.</p> <p>añadir datos en el formulario</p> <p>Phpmyadmin</p> <p></p> <p>Pestaña insertar</p> <p></p> <p>Seleccionar tabla</p> <p></p> <p>Rellenar valores</p> <p></p> <p>Continuar</p> <p></p> <p>Pestaña examinar para eliminar o modificar registros</p> <p></p> <p>PRÁCTICA: descargar y realizar formularios</p> <p>2.</p> <p>ACCESS COMO ENTORNO GRÁFICO PARA OTROS GESTORES</p> <p></p> <p>Se</p> <p>hace</p> <p>a</p> <p>través</p> <p>de</p> <p>conectores</p> <p>ODBC</p> <p>(Open</p> <p>DataBase</p> <p>Connectivity)</p> <p></p> <p>ODBC</p> <p>o</p> <p>Herramienta</p> <p>que</p> <p>de</p> <p>forma</p> <p>estándar</p> <p>permite</p> <p>conectar</p> <p>aplicaciones a cualquier SGBD</p> <p>o</p> <p>Instalar el driver ODBC para ese SGBD</p> <p>o</p> <p>Se crea una DNS(Data Source Name) (referencia a cierta</p> <p>base de datos)</p> <p></p> <p>Windows:</p> <p>panel</p> <p>de</p> <p>control,</p> <p>herramientas</p> <p>administrativas,</p> <p>opción orígenes de datos ODBC, creación de origen de datos</p> <p>ODBC en mysql , rellenar campos, data source name</p> <p>ACTIVIDAD 5.1: Descargar desde mysql.org el apartado Download</p> <p>Connectors, el conector ODBC e instalarlo en el ordenador.</p> <p>Conectar la BD DE la jardinería dese la máquina virtual disponible en la</p> <p>página web www.garceta.es</p> <p>3.</p> <p>SENTENCIA INSERT</p> <p></p> <p>Añadir registros a una tabla</p> <p></p> <p>Sintaxis</p> <p>INSERT [INTO] nombre_tabla</p> <p>*(nombre_campo1, nombre_campo2, …)+</p> <p>VALUES</p> <div class="table-wrapper"><table> <tbody> <tr> <td>(valor_campo1</td> <td>default, valor_campo2</td> <td>default, …);</td> </tr> </tbody> </table></div> <p></p> <p>Los nombres de campos son opcionales.</p> <p></p> <p>Si no se especifican los nombres de campos, la lista de valores se</p> <p>escribirá conforme al orden especificado en la definición de la</p> <p>tabla</p> <p></p> <p>Se pueden especificar columnas concretas</p> <p>o</p> <p>Ejemplo: insertar en la tabla de mascotas el registro</p> <p>(1,’Pequitas’, ‘Gato Común europeo’)</p> <p>INSERT INTO mascotas (código, nombre, raza)</p> <p>VALUES</p> <p>(1,’Pequitas’, ‘Gato Común europeo’);</p> <p></p> <p>Las columnas no especificadas contendrá valor NULL.</p> <p></p> <p>Default:</p> <p>si</p> <p>queremos</p> <p>utilizar</p> <p>el</p> <p>valor</p> <p>por</p> <p>defecto</p> <p>que</p> <p>se</p> <p>especificó cuando se creó la tabla</p> <p></p> <p>Especificar varios registros a la vez, separados por coma</p> <p>INSERT [INTO] nombre_tabla</p> <p>*(nombre_campo1, nombre_campo2, …)+</p> <p>VALUES</p> <div class="table-wrapper"><table> <tbody> <tr> <td>(valor_campo1</td> <td>default, valor_campo2</td> <td>default, …),</td> </tr> </tbody> </table></div> <div class="table-wrapper"><table> <tbody> <tr> <td>(valor_campo1</td> <td>default, valor_campo2</td> <td>default, …),</td> </tr> </tbody> </table></div> <div class="table-wrapper"><table> <tbody> <tr> <td>(valor_campo1</td> <td>default, valor_campo2</td> <td>default, …),</td> </tr> </tbody> </table></div> <p>….</p> <div class="table-wrapper"><table> <tbody> <tr> <td>(valor_campo1</td> <td>default, valor_campo2</td> <td>default, …);</td> </tr> </tbody> </table></div> <p></p> <p>INSERT Y SELECT: en lugar de especificar valores, se extraen de</p> <p>una consulta</p> <p>INSERT [INTO] nombre_tabla</p> <p>Consulta con los registros necesarios.</p> <p>EJEMPLO: crear en zoológico la tabla copia y llenarla con los registros</p> <p>de las mascotas.</p> <p>CREATE TABLE copia ( nombre varchar(20), propietario varchar(20),</p> <p>especie</p> <p>varchar(20),</p> <p>sexo</p> <p>varchar(1),</p> <p>nacimiento</p> <p>date,</p> <p>fallecimiento date);</p> <p>INSERT INTO copia select * from mascotas;</p> <p>4.</p> <p>SENTENCIA UPDATE</p> <p></p> <p>Modifica el contenido de la tabla</p> <p></p> <p>Sintaxis</p> <p>UPDATE nombre_tabla</p> <p>SET campo1=expresión [, campo2=expresión]</p> <p>[WHERE filtro]</p> <p></p> <p>Si se omite el filtro se aplica a todos los registros</p> <p>EJEMPLOS:</p> <p>1.</p> <p>Cambiar el peso de libras a kilos de todos los jugadores</p> <p>UPDATE jugadores SET peso=peso*0.4535;</p> <p>UPDATE jugadores SET peso=peso/0.4535;</p> <p>2.</p> <p>Modificar la procedencia del jugador ‘Pau Gasol’</p> <p>UPDATE jugadores SET procedencia = ‘Italia’</p> <p>WHERE nombre=’Pau Gasol’;</p> <p>UPDATE jugadores SET procedencia = ‘Spain’</p> <p>WHERE nombre=’Pau Gasol’;</p> <p>3.</p> <p>Modificar el peso y la procedencia del jugador ‘Pau Gasol’</p> <p>UPDATE jugadores SET procedencia = ‘Italia’, Peso=100</p> <p>WHERE nombre=’Pau Gasol’;</p> <p>UPDATE jugadores SET procedencia = ‘Spain’, Peso=249</p> <p>WHERE nombre=’Pau Gasol’;</p> <p>5.</p> <p>SENTENCIA DELETE</p> <p></p> <p>Borra registros de una tabla</p> <p></p> <p>Sintaxis:</p> <p>DELETE FROM nombre_tabla</p> <p>[WHERE filtro]</p> <p>Ejemplo:</p> <p>insertar</p> <p>en</p> <p>zoológico</p> <p>una</p> <p>mascota</p> <p>y</p> <p>borrarla</p> <p>posteriormente</p> <p>INSERT INTO mascotas (nombre) VALUES (‘kira’);</p> <p>DELETE FROM mascotas WHERE nombre=’kira’;</p> <p>6.</p> <p>ACTUALIZAR Y BORRAR UTILIZANDO CONSULTAS</p> <p>EJEMPLO1: En la BD de la jardinería eliminar los empleados que no</p> <p>tengan clientes. ( creamos una base de datos para las eliminaciones</p> <p>y modificaciones)</p> <p>create database anajardineria1;</p> <p>use anajardineria1</p> <p>source ruta_archivo</p> <p>COMPROBAMOS LOS DATOS</p> <p>TODOS LOS EMPLEADOS</p> <p>select * from empleados;</p> <p>EMPLEADOS QUE TIENEN CLIENTES</p> <p>Select codigoempleado from Empleados where codigoempleado in</p> <p>(select</p> <p>codigoempleadorepventas</p> <p>from</p> <p>Clientes)</p> <p>and</p> <p>puesto</p> <p>like</p> <p>‘Representante Ventas’;</p> <p>EMPLEADOS QUE NO TIENEN CLIENTES</p> <p>Select codigoempleado from Empleados where codigoempleado not in</p> <p>(select</p> <p>codigoempleadorepventas</p> <p>from</p> <p>Clientes)</p> <p>and</p> <p>puesto</p> <p>like</p> <p>‘Representante Ventas’;</p> <p>BORRAMOS LOS REGISTROS</p> <p>delete</p> <p>from</p> <p>Empleados</p> <p>where</p> <p>codigoempleado</p> <p>not</p> <p>in</p> <p>(select</p> <p>codigoempleadorepventas</p> <p>from</p> <p>Clientes)</p> <p>and</p> <p>puesto</p> <p>like</p> <p>‘Representante Ventas’;</p> <p>7.</p> <p>SENTENCIAS UPDATE Y DELETE CON SUBCONSULTAS</p> <p></p> <p>Limitación: no se permite realizar cambios en la tabla que se lee</p> <p>en la subconsulta</p> <p></p> <p>Ejemplo de borrado posible: el caso anterior</p> <p></p> <p>Ejemplo</p> <p>de</p> <p>borrado</p> <p>imposible:</p> <p>borrar</p> <p>los</p> <p>clientes</p> <p>con</p> <p>limitecredito=0</p> <p>DELETE FROM Clientes WHERE Codigocliente IN</p> <p>(SELECT Codigocliente FROM Clientes WHERE limitecredito=);</p> <p>8.</p> <p>BORADO Y MODIFICACIÓN DE REGISTROS CON RELACIONES</p> <p></p> <p>No es posible modificar o borrar directamente registros que</p> <p>participen en relaciones</p> <p></p> <p>El SGBD nos informará de ello</p> <p></p> <p>Ejemplo:</p> <p>borrar</p> <p>nombre</p> <p>de</p> <p>cliente</p> <p>que</p> <p>tiene</p> <p>pagos</p> <p>pendientes</p> <p></p> <p>Surgen</p> <p>problemas</p> <p>al</p> <p>intentar</p> <p>borrar</p> <p>o</p> <p>modificar</p> <p>la</p> <p>clave</p> <p>primaria o clave foránea.</p> <p></p> <p>LA</p> <p>CREACIÓN</p> <p>DE</p> <p>TABLAS,</p> <p>CON</p> <p>CLAVES</p> <p>PRIMARIAS</p> <p>Y</p> <p>FORÁNEAS es necesario utilizar la cláusula REFERENCES</p> <p>SINTAXIS</p> <p>REFERENCES nombre_tabla *(nombre_campo, ….)+</p> <p>[ON DELETE opción_referencia]</p> <p>[ON UPDATE opción_referencia ]</p> <p>Opción_referencia</p> <div class="table-wrapper"><table> <tbody> <tr> <td>CASCADE</td> <td>SET NULL</td> <td>NO ACTION</td> </tr> </tbody> </table></div> <p>ON DELETE, ON UPDATE : personalizan el comportamiento para el</p> <p>borrado y actualización respectivamente.</p> <p>CASCADE: permite modificar y borrar las claves primarias y foráneas,</p> <p>de</p> <p>manera</p> <p>que</p> <p>se</p> <p>realizan</p> <p>cambios</p> <p>en</p> <p>todas</p> <p>las</p> <p>tablas</p> <p>que</p> <p>aparecen.</p> <p>SET NULL: permite modificar y borrar pero el registro permanece con</p> <p>valores nulos o vacíos.</p> <p>NO ACTION: no permite ni borrado ni modificaciones. Es aconsejable</p> <p>para las claves primarias.</p> <p>PRÁCTICA:</p> <p></p> <p>Realizar ejercicio propuesto de Pag 195 libro.</p> <p></p> <p>Las tablas deben ser innodb para soportar FOREING KEY</p> <p></p> <p>Crear bd comercial.</p> <p>#crar la base de datos</p> <p>Create database comercial;</p> <p>Use comercial</p> <p>1.</p> <p>Creamos las tablas</p> <p>create</p> <p>table</p> <p>clientes</p> <p>(</p> <p>dni</p> <p>varchar(15)</p> <p>PRIMARY</p> <p>KEY,</p> <p>nombre</p> <p>varchar(50), direccion varchar(50)) engine = innodb;</p> <p>create</p> <p>table</p> <p>pagos_pendientes(</p> <p>dni</p> <p>varchar(15),</p> <p>importe</p> <p>double,</p> <p>FOREING</p> <p>KEY</p> <p>(dni)</p> <p>REFERENCES</p> <p>clientes(dni)</p> <p>ON</p> <p>DELETE</p> <p>NO</p> <p>ACTION ON UPDATE NO ACTION) engine=innodb;</p> <p>2.</p> <p>Insertamos valores</p> <p>insert</p> <p>into</p> <p>clientes</p> <p>values</p> <p>(‘5555672L’,’PEPE</p> <p>CIFUENTES’,’C/</p> <p>LOS</p> <p>ALMENDROS 23’);</p> <p>insert into pagos_pendientes values (“5555672L”, 500);</p> <p>insert into pagos_pendientes values ( “5555672”, 234.5);</p> <p>ERROR 1452 (23000): Cannot add or update a child row: a foreign key</p> <p>constraint</p> <p>fails</p> <p>(<code class="language-plaintext highlighter-rouge">comercial</code>.<code class="language-plaintext highlighter-rouge">pagos_pendientes</code>,</p> <p>CONSTRAINT</p> <p><code class="language-plaintext highlighter-rouge">pagos_pendientes_ibfk_1</code></p> <p>FOREIGN</p> <p>KEY</p> <p>(<code class="language-plaintext highlighter-rouge">dni</code>)</p> <p>REFERENCES</p> <p><code class="language-plaintext highlighter-rouge">clientes</code> (<code class="language-plaintext highlighter-rouge">dni</code>) ON DELETE NO ACTION ON UPDATE NO ACTION)</p> <p>3.</p> <p>Borramos cliente: no es possible</p> <p>delete from clientes where dni= “5555672L”;</p> <p>ERROR 1451 (23000)</p> <p>4.</p> <p>Modificar dni del cliente: no es posible</p> <p>update clientes set dni=”55555555L” where dni=”5555672L”;</p> <p>ERROR 1451</p> <p>5.</p> <p>Borrar tabla clientes: no es posible</p> <p>drop table clientes;</p> <p>ERROR 1217 (23000): Cannot delete or update a parent row: a foreign</p> <p>key constraint fails</p> <p>6.</p> <p>Realizar los ejercicios anteriores creando las tablas para cambiar las</p> <p>restricciones a:</p> <p>on delete cascade on update cascade</p> <p>PRÁCTICAS RESUELTAS</p> <p>5.1 Inserciones, Actualizaciones y Borrados</p> <p>5.2 Actualizaciones y borrados con subconsultas</p> <p>PRÁCTICAS PROPUESTAS</p> <p>5.3 Vincular tablas a través de Access /ODBC</p> <p>5.4 Actualizaciones y borrados variados</p> <p>9.</p> <p>TRANSACCIONES</p> <p></p> <p>Son conjuntos de sentencias SQL que se tratan como una sola</p> <p>instrucción</p> <p></p> <p>Son esenciales para mantener la integridad de los datos</p> <p></p> <p>Garantiza la atomicidad de la operación: o se hacen todas las</p> <p>operaciones o no se hace ninguna</p> <p></p> <p>Pueden ser:</p> <p>o</p> <p>Confirmadas: commit</p> <p>o</p> <p>Abortadas: rollback</p> <p></p> <p>Por</p> <p>defecto</p> <p>el</p> <p>SGBD</p> <p>tiene</p> <p>activado</p> <p>el</p> <p>modo</p> <p>AUTOCOMMIT=ON</p> <p>(cada</p> <p>comando</p> <p>SQL</p> <p>se</p> <p>considera</p> <p>una</p> <p>transacción independiente)</p> <p></p> <p>AUTOCOMMIT=OFF :</p> <p>o</p> <p>activa las transacciones de múltiples sentencias</p> <p>o</p> <p>todos los comandos SQL tendrán que terminarse con la</p> <p>orden COMMIT o ROLLBACK</p> <p>o</p> <p>algunos</p> <p>SGBD</p> <p>requieren</p> <p>de</p> <p>las</p> <p>órdenes</p> <p>START</p> <p>TRANSACTION</p> <p>o</p> <p>START</p> <p>WORK</p> <p>para</p> <p>indicar</p> <p>que</p> <p>comience o termine una transacción</p> <p></p> <p>EN mysql: 3 formas de comenzar una transacción</p> <p>o</p> <p>SET AUTOCOMMIT=0</p> <p>o</p> <p>START TRANSACTION</p> <p>o</p> <p>BEGIN WORK</p> <p></p> <p>Aceptar cambios: COMMIT WORK;</p> <p></p> <p>Cancelar cambios: ROLLBACK WORK;</p> <p></p> <p>Ejemplo:</p> <p>Realizar</p> <p>la</p> <p>siguiente</p> <p>transacción</p> <p>en</p> <p>la</p> <p>BD</p> <p>de la</p> <p>jardinería:</p> <p>Actualizar el stock para disminuirlo en 2 unidades, insertar un</p> <p>pedido, insertar el detalle del pedido.</p> <p>#COMENZAR TRANSACCIÓN</p> <p>SET AUTOCOMMIT=0;</p> <p>#DISMINUIR EN 2 LA CANTIDADENSTOCK</p> <p>update Productos set Cantidadenstock=Cantidadenstock-2</p> <p>where cantidadenstock between 150 and 200;</p> <p>#INSERTAR EL PEDIDO</p> <p>insert into Pedidos values (425,now(),now(),now(), “pendiente “,” “, 1);</p> <p>#INSERTAR</p> <p>DETALLE</p> <p>DEL</p> <p>PEDIDOSinsert</p> <p>into</p> <p>DetallePedidos</p> <p>values</p> <p>(425,”FR-67”,20,100,1);</p> <p>#ACEPTAR CAMBIOS;</p> <p>COMMIT WORK;</p> <p>10.</p> <p>ACCESO CONCURRENTE A LOS DATOS</p> <p>Alumnos:</p> <p>Realizar documento o presentación con los problemas de acceso</p> <p>concurrente con ejemplos</p> <p></p> <p>Ocurren</p> <p>cuando</p> <p>se</p> <p>accede</p> <p>al</p> <p>mismo</p> <p>dato</p> <p>en</p> <p>2</p> <p>o</p> <p>más</p> <p>transacciones distintas.</p> <p>Los problemas del acceso concurrente son:</p> <p>1.</p> <p>Dirty Read(Lectura sucia): una transacción lee datos escritos por</p> <p>una transacción que no ha hecho COMMIT.</p> <p>2.</p> <p>Nonrepeatable</p> <p>Read(Lectura</p> <p>no</p> <p>repetible):</p> <p>una</p> <p>transacción</p> <p>vuelve a leer datos que leyó previamente y encuentra que han</p> <p>sido modificados por otra transacción.</p> <p>3.</p> <p>Phantom Read (Lectura fantasma). Una transacción lee unos</p> <p>datos que no existían cuando se inició la transacción.</p> <p></p> <p>Cuando se trabaja con transacciones, se pueden bloquear</p> <p>conjuntos</p> <p>de</p> <p>datos</p> <p>para</p> <p>evitar</p> <p>o</p> <p>permitir</p> <p>los</p> <p>problemas</p> <p>anteriores.</p> <p></p> <p>Según el nivel de concurrencia, se puede solicitar 4 niveles de</p> <p>aislamiento</p> <p></p> <p>Nivel de aislamiento define cómo los cambios hechos por una</p> <p>transacción son visibles a otras transacciones</p> <p>1.</p> <p>Read Uncommited(Lectura no acometida).</p> <p></p> <p>Permite que sucedan los tres problemas anteriores.</p> <p></p> <p>Las sentencias SELECT son efectuadas sin realizar bloqueos</p> <p></p> <p>Todos los cambios hechos por una transacción pueden verlos</p> <p>las otras transacciones</p> <p>2.</p> <p>Read Commited(Lectura acometida).</p> <p></p> <p>Los datos leídos por una transacción pueden ser modificados</p> <p>por otras transacciones</p> <p></p> <p>Se pueden dar los problemas 2 y 3</p> <p>3.</p> <p>Repeatable Read (Lectura Repetible)</p> <p></p> <p>Ningún registro leído con un SELECT se puede cambiar en otra</p> <p>transacción.</p> <p></p> <p>Se permite el problema 3</p> <p>NIVEL DE AISLAMIENTO EN MYSQL</p> <p></p> <p>Las tablas innodb por defecto tienen nivel REPEATABLE READ</p> <p></p> <p>Para variar el nivel de aislamiento:</p> <p>o</p> <p>Cambiando el fichero de configuración my.cnf</p> <p>o</p> <p>Ejecutando</p> <p>SET TRANSACTION ISOLATION</p> <p>LEVEL</p> <p>{</p> <p>READ</p> <p>UNCOMMITTED</p> <div class="table-wrapper"><table> <tbody> <tr> </tr> </tbody> </table></div> <p>READ</p> <p>COMMITTED</p> <div class="table-wrapper"><table> <tbody> <tr> </tr> </tbody> </table></div> <div class="table-wrapper"><table> <tbody> <tr> <td>REPEATABLE READ</td> <td>SERIALIZABLE}</td> </tr> </tbody> </table></div> <p>EJEMPLOS PAGINA 200 del libro.</p> <p>11.</p> <p>ACCESO A LA INFORMACIÓN</p> <p></p> <p>Es</p> <p>necesario</p> <p>administrar</p> <p>la</p> <p>seguridad</p> <p>en</p> <p>el</p> <p>acceso</p> <p>a</p> <p>la</p> <p>información</p> <p></p> <p>Existen 2 tipos de seguridad:</p> <p>o</p> <p>Integrada por el sistema operativo</p> <p>o</p> <p>Proporcionada por el SGBD o seguridad nativa</p> <p>12.</p> <p>LAS VISTAS</p> <p>DEFINICIONES</p> <p></p> <p>Es una tabla virtual, sin contenido</p> <p></p> <p>Devuelve el resultado de ejecutar una consulta SQL</p> <p></p> <p>Es una consulta cuya definición ha sido almacenada y compilada</p> <p>previamente, por tanto su tiempo de ejecución es menor</p> <p></p> <p>Permite restringir el acceso a los usuarios a determinadas tablas</p> <p>CREACIÓN DE VISTAS</p> <p>SINTAXIS</p> <p>CREATE</p> <p>[OR</p> <p>REPLACE]</p> <p>VIEW</p> <p>[esquema.]</p> <p>nombre_vista</p> <p>[(lista_columnas)] AS sentencia_select</p> <p>OR REPLACE: cuando la vista ya existe y queremos reemplazarla</p> <p>Lista_columnas: cada columna tendrá el alias que se indique. Si no se</p> <p>especifica,</p> <p>el</p> <p>nombre</p> <p>de</p> <p>las</p> <p>columnas</p> <p>será</p> <p>el resultado</p> <p>de</p> <p>la</p> <p>consulta</p> <p>Ejemplo:</p> <p>create view jugadoresmi as select nombre, posicion, nombre_equipo</p> <p>from jugadores where nombre_equipo=’Heat’;</p> <p>select * from jugadoresmi;</p> <p>BORRADO DE VISTAS</p> <p>DROP VIEW nombre_vista;</p> <p>MODIFICAR VISTAS</p> <p>ALTER VIEW nombre_vista ….</p> <p>13.</p> <p>USUARIOS</p> <p>Acceden a los objetos de la BD con cierto nivel de privilegios</p> <p>CREAR</p> <p>CREATE USER nombre_usuario IDENTIFIED BY ‘password’ *opciones+;</p> <p>Ejemplo:</p> <p>CREATE USER paco IDENTIFIED BY ‘123456’;</p> <p>ACTIVIDAD</p> <p>5.3.</p> <p>CREAR</p> <p>USUARIO</p> <p>Pedro</p> <p>y</p> <p>Javier</p> <p>con</p> <p>password</p> <p>apropiados.</p> <p>BORRAR</p> <p>DROP USER nombre_usuario [CASCADE];</p> <p>CASCADE: para indicar que junto con el usuario se borren los objetos</p> <p>de su esquema.</p> <p>Se pueden borrar varios usuarios separados por comas.</p> <p>MODIFICAR</p> <p>Es necesario actualizar sus datos en la tabla mysql.user del sistema</p> <p>UPDATE mysql.user</p> <p>SET cambios;</p> <p>FLUSH PRIVILEGES;</p> <p>FLUSH PRIVILEGES: fuerza al gestor:</p> <p></p> <p>a leer las tablas de permisos</p> <p></p> <p>los cambios en los permisos sean efectivos desde ese momento</p> <p>Ejemplo: cambiar el host desde el que el usuario Javier se puede</p> <p>conectar.</p> <p>UPDATE mysql.user</p> <p>SET host=’192.168.3.1’ WHERE USER=’Javier’;</p> <p>FLUSH PRIVILEGES;</p> <p>RENOMBRAR</p> <p>Renombrar usuario</p> <p>RENAME USER nombre_usuario1 TO nombre_usuario2;</p> <p>Renombrar password</p> <p>SET PASSWORD FOR password1=PASSWORD(‘password2’);</p> <p>Actividad 5.4: modificar usuario</p> <p>UPDATE mysql.user</p> <p>SET PASSWORD=PASSWORD(“Nuevo”)</p> <p>WHERE USER=’Paco’ AND host=’localhost’;</p> <p>Actividades consolidación:</p> <p>1.</p> <p>Crear usuario con vuestro nombre y password el mismo nombre</p> <p>create user ana identified by ‘ana’;</p> <p>2.</p> <p>salir de mysql y volver a entrar como el usuario creado</p> <p>14.</p> <p>PRIVILEGIOS</p> <p>Permiten manipular los objetos de la base de datos.</p> <p>GRANT</p> <p>Quitar privilegios</p> <p>REVOKE</p> <p>14.1.</p> <p>SISTEMA DE PRIVILEGIOS EN MYSQL</p> <p>GRANT tipo_privilegio <em>(columnas)+ *, tipo_privilegio</em>(columnas)++ …</p> <p>ON</p> <div class="table-wrapper"><table> <tbody> <tr> <td>{nombre_tabla</td> <td>*</td> <td><em>.</em></td> <td>base_datos.*</td> <td>base_datos.nombre_tabla}</td> </tr> </tbody> </table></div> <p>TO nombre_usuario [IDENTIFIED BY [PASSWORD]’password’]</p> <p>[, nombre_usuario1 *IDENTIFIED BY *PASSWORD+’password’+ +…</p> <p>[WITH opcion *,opcion++…</p> <p>Tipo_privilegio: clase de permiso que se puede otorgar:</p> <div class="table-wrapper"><table> <tbody> <tr> <td>Select</td> <td>insert</td> <td>update</td> <td>otros</td> </tr> </tbody> </table></div> <p>Otros: página 210 libro.</p> <p>Los tipos de privilegios se pueden aplicar a los siguientes objetos:</p> <p></p> <p>nombre_tabla: una tabla concreta</p> <p></p> <p>*: todas las tablas de la BD</p> <p></p> <p><em>.</em>: todas las tablas de todas las BBDD</p> <p></p> <p>base_datos.* : todas las tablas de la BD especificada</p> <p></p> <p>base_datos.nombre_tabla:</p> <p>la</p> <p>tabla</p> <p>especificada</p> <p>de</p> <p>la</p> <p>BD</p> <p>especificada</p> <p>Opcion=</p> <p>GRANT OPCION</p> <div class="table-wrapper"><table> <tbody> <tr> <td>MAX_QUERIES_PER_HOUR count</td> </tr> </tbody> </table></div> <div class="table-wrapper"><table> <tbody> <tr> <td>MAX_UPDATES_PER_HOUR count</td> </tr> </tbody> </table></div> <div class="table-wrapper"><table> <tbody> <tr> <td>MAX_CONNECTIONS_PER_HOUR count</td> </tr> </tbody> </table></div> <div class="table-wrapper"><table> <tbody> <tr> <td>MAX_USER_CONNECTIONS count</td> </tr> </tbody> </table></div> <p>GRANT OPCION: concede a otros usuarios los permisos que tiene el</p> <p>usuario. Si el root concede GRANT OPCION a los usuarios que cree</p> <p>le otorga los mismos permisos que él</p> <p>MAX_QUERIES_PER_HOUR count: restringe el número de consultas</p> <p>por hora que realiza el usuario</p> <div class="table-wrapper"><table> <tbody> <tr> <td>MAX_UPDATES_PER_HOUR</td> </tr> </tbody> </table></div> <p>count:</p> <p>restringe</p> <p>el</p> <p>número</p> <p>de</p> <p>modificaciones por hora que realiza el usuario</p> <div class="table-wrapper"><table> <tbody> <tr> <td>MAX_CONNECTIONS_PER_HOUR count: restringe el número de</td> </tr> </tbody> </table></div> <p>conexiones login por hora que realiza el usuario</p> <div class="table-wrapper"><table> <tbody> <tr> <td>MAX_USER_CONNECTIONS count: limita el número de conexiones</td> </tr> </tbody> </table></div> <p>simultáneas que puede realizar el usuario.</p> <p>Ejemplos:</p> <p>1.</p> <p>Otorgar</p> <p>permisos</p> <p>al</p> <p>usuario</p> <p>Paco</p> <p>para</p> <p>que</p> <p>sólo</p> <p>pueda</p> <p>seleccionar las columnas NombreCliente, Telefono, Ciudad de</p> <p>la tabla Clientes</p> <p>GRANT SELECT (NombreCliente, Telefono, Ciudad)</p> <p>ON Clientes TO Paco;</p> <p>2.</p> <p>Otorgar permisos de select e insert a todas las tablas de la BD</p> <p>de la NBA al usuario Paco.</p> <p>GRANT SELECT, INSERT ON nba.* TO Paco;</p> <p>3.</p> <p>Otorgar</p> <p>todos</p> <p>los</p> <p>privilegios</p> <p>a</p> <p>la</p> <p>tabla</p> <p>Clientes</p> <p>de</p> <p>la</p> <p>BD</p> <p>JARDINERIA</p> <p>GRANT ALL PRIVILEGES ON jardinería.Clientes TO Paco;</p> <p>4.</p> <p>Otorgar permisos de select a todas las tablas de todas las bases de</p> <p>datos, permitiendo al usuario ceder esos permisos a otros usuarios</p> <p>GRANT SELECT ON <em>.</em> TO Paco WHITH GRANT OPTION;</p> <p>5.</p> <p>Otorgar permisos de SELECT, INSERT, UPDATE , DELETE con un</p> <p>límite de 10 consultas a la hora en la tabla jugadores de la NBA</p> <p>GRANT SELECT, INSERT, PUDATE, DELETE ON nba.jugadores</p> <p>TO Paco</p> <p>WITH</p> <p>MAX_QUERIES_PER_HOUR</p> <p>10</p> <p>MAX_UPDATES_PER_HOUR</p> <p>10;</p> <p>DENEGAR PERMISOS A USUARIOS</p> <p>REVOKE tipo_privilegio <em>(columnas)+ *, tipo_privilegio</em>(columnas)++ …</p> <p>ON</p> <div class="table-wrapper"><table> <tbody> <tr> <td>{nombre_tabla</td> <td>*</td> <td><em>.</em></td> <td>base_datos.*</td> <td>base_datos.nombre_tabla}</td> </tr> </tbody> </table></div> <p>FROM usuario [, usuario1] …</p> <p>Ejemplos:</p> <p>1.</p> <p>Quitar el permiso de select a la tabla jardinería.Cliente al usuario</p> <p>Paco.</p> <p>REVOKE SELECT ON jardinería.Clientes FROM Paco;</p> <p>2.</p> <p>Elimina el permiso ALL PRIVILEGES de todas las tablas al usuario</p> <p>Paco.</p> <p>REVOKE ALL PRIVILEGES ON <em>.</em> FROM Paco;</p> <p>3.</p> <p>Quitar</p> <p>los</p> <p>permisos</p> <p>de</p> <p>select</p> <p>e</p> <p>insert</p> <p>de</p> <p>todas</p> <p>las</p> <p>tablas</p> <p>de</p> <p>jardinería al usuario Paco.</p> <p>REVOKE SELECT, INSERT ON jardinería.* FROM Paco;</p> <hr> <h2 class="text-delta">Table of contents</h2> <ul> </ul> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
