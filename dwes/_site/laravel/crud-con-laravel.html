<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>5.17 CRUD desarrollado con Laravel - DWES DOCS</title> <link rel="shortcut icon" href="/docs/dwes/_site/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/docs/dwes/_site/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/docs/dwes/_site/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/docs/dwes/_site/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>5.17 CRUD desarrollado con Laravel | DWES DOCS</title> <meta name="generator" content="Jekyll v4.2.2" /> <meta property="og:title" content="5.17 CRUD desarrollado con Laravel" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Apuntes del módulo de “Desarrollo web en entorno servidor”, de 2º curso del Ciclo Formativo de Grado Superior de “Desarrollo de Aplicaciones Web”, impartido en el IES Celia Viñas de Almería (España)" /> <meta property="og:description" content="Apuntes del módulo de “Desarrollo web en entorno servidor”, de 2º curso del Ciclo Formativo de Grado Superior de “Desarrollo de Aplicaciones Web”, impartido en el IES Celia Viñas de Almería (España)" /> <link rel="canonical" href="https://iescelia.org/docs/dwes/_site/laravel/crud-con-laravel.html" /> <meta property="og:url" content="https://iescelia.org/docs/dwes/_site/laravel/crud-con-laravel.html" /> <meta property="og:site_name" content="DWES DOCS" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="5.17 CRUD desarrollado con Laravel" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Apuntes del módulo de “Desarrollo web en entorno servidor”, de 2º curso del Ciclo Formativo de Grado Superior de “Desarrollo de Aplicaciones Web”, impartido en el IES Celia Viñas de Almería (España)","headline":"5.17 CRUD desarrollado con Laravel","url":"https://iescelia.org/docs/dwes/_site/laravel/crud-con-laravel.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="https://iescelia.org/docs/dwes/_site/" class="site-title lh-tight"> DWES DOCS </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://iescelia.org/docs/dwes/_site/" class="nav-list-link">Desarrollo Web en Entorno Servidor</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://iescelia.org/docs/dwes/_site/cms/" class="nav-list-link">1 Sistemas gestores de contenido (CMS)</a><ul class="nav-list"><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/cms/algunas-cosas-que-debes-saber.html" class="nav-list-link">1.1 Algunas cosas que debes saber sobre los CMS</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/cms/wordpress.html" class="nav-list-link">1.2 Wordpress</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/cms/moodle.html" class="nav-list-link">1.3 Moodle</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/cms/prestashop.html" class="nav-list-link">1.4 Prestashop</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://iescelia.org/docs/dwes/_site/php/" class="nav-list-link">2 Introducción a PHP</a><ul class="nav-list"><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/php/programacion-cliente-servidor.html" class="nav-list-link">2.1 Programación cliente-servidor</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/php/caja-de-herramientas.html" class="nav-list-link">2.2 Caja de herramientas</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/php/sintaxis-de-php.html" class="nav-list-link">2.3 Sintaxis de PHP</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/php/interaccion-con-php.html" class="nav-list-link">2.4 Interacción con la base de datos</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/php/depuracion-php-xdebug.html" class="nav-list-link">2.5 Depurando el código PHP con xdebug</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/php/tdd.html" class="nav-list-link">2.6 TDD (test-driven development)</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/php/ejercicios-propuestos.html" class="nav-list-link">2.7 Ejercicios propuestos</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/php/ejercicios-resueltos.html" class="nav-list-link">2.8 Ejercicios resueltos</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://iescelia.org/docs/dwes/_site/cookies-sesiones-seguridad/" class="nav-list-link">3 Cookies, sesiones y seguridad</a><ul class="nav-list"><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/cookies-sesiones-seguridad/cookies.html" class="nav-list-link">3.1 Cookies</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/cookies-sesiones-seguridad/sesiones.html" class="nav-list-link">3.2 Sesiones</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/cookies-sesiones-seguridad/control-de-acceso.html" class="nav-list-link">3.3. Sesiones, cookies y control de acceso</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/cookies-sesiones-seguridad/tecnicas-de-ataque-frecuentes.html" class="nav-list-link">3.4 Técnicas de ataque frecuentes</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/cookies-sesiones-seguridad/autenticacion-mediante-acl.html" class="nav-list-link">3.5 Autenticación mediante ACL</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/cookies-sesiones-seguridad/ejercicios-propuestos.html" class="nav-list-link">3.6 Ejercicios propuestos</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/cookies-sesiones-seguridad/ejercicios-resueltos.html" class="nav-list-link">3.7 Ejercicios resueltos</a> </li></ul></li><li class="nav-list-item "><a href="https://iescelia.org/docs/dwes/_site/mvc/" class="nav-list-link">4 Arquitectura MVC</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://iescelia.org/docs/dwes/_site/laravel/" class="nav-list-link">5 Laravel</a><ul class="nav-list"><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/laravel/que-es-un-framework.html" class="nav-list-link">5.1 Frameworks PHP MVC</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/laravel/caracteristicas.html" class="nav-list-link">5.2 Características de Laravel</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/laravel/instalacion.html" class="nav-list-link">5.3 Instalación de Laravel</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/laravel/arquitectura-convenciones-configuracion.html" class="nav-list-link">5.4 Arquitectura, convenciones y configuración de Laravel</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/laravel/artisan.html" class="nav-list-link">5.5 Artisan, la consola que mola</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/laravel/hola-mundo-con-laravel.html" class="nav-list-link">5.6 Primeros pasos con Laravel. Hola mundo</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/laravel/enrutamiento.html" class="nav-list-link">5.7 Enrutamiento</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/laravel/vistas-y-plantillas-con-blade.html" class="nav-list-link">5.8 Vistas y plantillas. Blade</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/laravel/controladores.html" class="nav-list-link">5.9 Controladores</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/laravel/migraciones.html" class="nav-list-link">5.10 Migraciones</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/laravel/eloquent.html" class="nav-list-link">5.11 Usando la BD con Eloquent</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/laravel/querybuilder.html" class="nav-list-link">5.12 Usando la BD con QueryBuilder</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/laravel/sesiones.html" class="nav-list-link">5.13 Sesiones con Laravel</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/laravel/helpers.html" class="nav-list-link">5.14 Helpers de Laravel</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/laravel/flujo-de-trabajo-con-laravel.html" class="nav-list-link">5.15 Flujo de trabajo típico con Laravel</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/laravel/aspectos-avanzados.html" class="nav-list-link">5.16 Aspectos avanzados de Laravel</a> </li><li class="nav-list-item active"> <a href="https://iescelia.org/docs/dwes/_site/laravel/crud-con-laravel.html" class="nav-list-link active">5.17 CRUD desarrollado con Laravel</a> </li></ul></li><li class="nav-list-item "><a href="https://iescelia.org/docs/dwes/_site/servicios-web/" class="nav-list-link">6 Servicios web</a></li><li class="nav-list-item "><a href="https://iescelia.org/docs/dwes/_site/ajax/" class="nav-list-link">7 Ajax</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://iescelia.org/docs/dwes/_site/otras-tecnologias/" class="nav-list-link">8 Otras tecnologías</a><ul class="nav-list"><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/otros/cgi.html" class="nav-list-link">8.1 CGI</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/otros/perl.html" class="nav-list-link">8.2 Perl</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/otros/python.html" class="nav-list-link">8.3 Python</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/otros/punto-net.html" class="nav-list-link">8.4 .NET</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/otros/jsp.html" class="nav-list-link">8.5 JSP</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/otros/ruby.html" class="nav-list-link">8.6 Ruby</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/otros/nodejs.html" class="nav-list-link">8.7 Node.js</a> </li><li class="nav-list-item "> <a href="https://iescelia.org/docs/dwes/_site/otros/mas-tecnologias-aun.html" class="nav-list-link">8.8 Más tecnologías aún</a> </li></ul></li><li class="nav-list-item "><a href="https://iescelia.org/docs/dwes/_site/scv-git/" class="nav-list-link">Apéndice I. Sistemas de control de versiones. Git</a></li></ul></li><li class="nav-list-item"><a href="https://iescelia.org/docs/dwes/_site/about/" class="nav-list-link">About</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search DWES DOCS" aria-label="Search DWES DOCS" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="https://iescelia.org/docs/dwes/_site/">Desarrollo Web en Entorno Servidor</a></li> <li class="breadcrumb-nav-list-item"><a href="https://iescelia.org/docs/dwes/_site/laravel/">5 Laravel</a></li> <li class="breadcrumb-nav-list-item"><span>5.17 CRUD desarrollado con Laravel</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h2 class="no_toc" id="517-crud-desarrollado-con-laravel-un-ejemplo-completo"> <a href="#517-crud-desarrollado-con-laravel-un-ejemplo-completo" class="anchor-heading" aria-labelledby="517-crud-desarrollado-con-laravel-un-ejemplo-completo"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.17. CRUD desarrollado con Laravel: un ejemplo completo </h2> <ul id="markdown-toc"> <li><a href="#migraciones" id="markdown-toc-migraciones">Migraciones</a></li> <li><a href="#seeders" id="markdown-toc-seeders">Seeders</a></li> <li><a href="#enrutador" id="markdown-toc-enrutador">Enrutador</a></li> <li><a href="#controlador" id="markdown-toc-controlador">Controlador</a></li> <li><a href="#modelo" id="markdown-toc-modelo">Modelo</a></li> <li><a href="#vista-plantilla-principal" id="markdown-toc-vista-plantilla-principal">Vista: plantilla principal</a></li> <li><a href="#vista-todos-los-productos" id="markdown-toc-vista-todos-los-productos">Vista: todos los productos</a></li> <li><a href="#vista-creaciónmodificación-de-productos" id="markdown-toc-vista-creaciónmodificación-de-productos">Vista: creación/modificación de productos</a></li> <li><a href="#y-ahora-qué" id="markdown-toc-y-ahora-qué">¿Y ahora qué?</a></li> </ul> <p>Para finalizar esta introducción (sí, sí: aunque haya sido muy largo, no es más que una introducción) a Laravel, vamos a <strong>desarrollar una pequeña aplicación web desde cero</strong>.</p> <p>Se tratará, en realidad, de un fragmento de otra aplicación más grande: una tienda online o tal vez un sistema de gestión de almacén. Da lo mismo. Nosotros vamos a desarrollar la parte de <strong>mantenimiento de productos</strong>.</p> <p>Para ello, supondremos que en la base de datos existe una tabla llamada <em>products</em> con los campos <em>id, name, description</em> y <em>price</em>.</p> <p>Vamos a construir el controlador, el modelo y las vistas necesarias para hacer el <strong>CRUD completo</strong> (create-read-update-delete) de esta tabla con Laravel, sin olvidarnos de las migraciones, los seeders y, por supuesto, el enrutador.</p> <p>¿Estás preparado/a? Pues vamos allá.</p> <h3 id="migraciones"> <a href="#migraciones" class="anchor-heading" aria-labelledby="migraciones"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Migraciones </h3> <p>Para esta miniaplicación solo necesitamos una migración, puesto que solo tenemos que crear una tabla.</p> <p>La migración se crea con el comando <code class="language-plaintext highlighter-rouge">php artisan make:migration create_table_products</code> y se escribe en el archivo <strong><em>/database/migrations/_timestamp_create_products_table.php</em></strong>, que tendrá este contenido:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>

<span class="kn">use</span> <span class="nc">Illuminate\Database\Migrations\Migration</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Illuminate\Database\Schema\Blueprint</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Illuminate\Support\Facades\Schema</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">CreateProductsTable</span> <span class="kd">extends</span> <span class="nc">Migration</span>
<span class="p">{</span>
    <span class="cd">/**
     * Run the migrations.
     *
     * @return void
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">up</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nc">Schema</span><span class="o">::</span><span class="nf">create</span><span class="p">(</span><span class="s1">'products'</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="kt">Blueprint</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="nf">id</span><span class="p">();</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="nf">string</span><span class="p">(</span><span class="s1">'name'</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="nf">string</span><span class="p">(</span><span class="s1">'description'</span><span class="p">,</span> <span class="mi">500</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="nf">double</span><span class="p">(</span><span class="s1">'price'</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="nf">timestamps</span><span class="p">();</span>
        <span class="p">});</span>
    <span class="p">}</span>

    <span class="cd">/**
     * Reverse the migrations.
     *
     * @return void
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">down</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nc">Schema</span><span class="o">::</span><span class="nf">dropIfExists</span><span class="p">(</span><span class="s1">'products'</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <h3 id="seeders"> <a href="#seeders" class="anchor-heading" aria-labelledby="seeders"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Seeders </h3> <p>En este <em>seeder</em> vamos a cargar unos cuantos datos de prueba. Obviamente, puedes cambiarlos por los que tú quieras.</p> <p>El seeder se crea con el comando <code class="language-plaintext highlighter-rouge">php artisan make:seeder ProductTableSeeder</code>, eque generará el archivo <strong><em>/database/seeders/ProductTableSeeder.php</em></strong>.</p> <p>Recuerda que, para poder lanzar el seeder automáticamente con <code class="language-plaintext highlighter-rouge">php artisan migrate:fresh --seed</code> u otro comando similar, tienes que editar el archivo <em>DatabaseSeeder.php</em> y añadir el <em>seeder</em> de productos. Si no recuerdas cómo hacerlo, consulta la sección de este tema dedicada a las migraciones.</p> <p>En cualquier caso, siempre puedes lanzar el <em>seeder</em> manualmente en cualquier momento con <code class="language-plaintext highlighter-rouge">php artisan db:seed --class=ProductTableSeeder</code>.</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>

<span class="kn">namespace</span> <span class="nn">Database\Seeders</span><span class="p">;</span>

<span class="kn">use</span> <span class="nc">Illuminate\Database\Seeder</span><span class="p">;</span>
<span class="kn">use</span> <span class="no">DB</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">ProductTableSeeder</span> <span class="kd">extends</span> <span class="nc">Seeder</span>
<span class="p">{</span>
    <span class="cd">/**
     * Run the database seeds.
     *
     * @return void
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">run</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="no">DB</span><span class="o">::</span><span class="nf">table</span><span class="p">(</span><span class="s1">'products'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">insert</span><span class="p">([</span>
            <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'Papel higiénico'</span><span class="p">,</span>
            <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'Papel higiénico extrasuave para glúteos sensibles'</span><span class="p">,</span>
            <span class="s1">'price'</span> <span class="o">=&gt;</span> <span class="s1">'1.35'</span><span class="p">,</span>
        <span class="p">]);</span>
        <span class="no">DB</span><span class="o">::</span><span class="nf">table</span><span class="p">(</span><span class="s1">'products'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">insert</span><span class="p">([</span>
            <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'Lejía blanca 1L'</span><span class="p">,</span>
            <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'Lejía pura capaz de traladrar las baldosas'</span><span class="p">,</span>
            <span class="s1">'price'</span> <span class="o">=&gt;</span> <span class="s1">'0.95'</span><span class="p">,</span>
        <span class="p">]);</span>
        <span class="no">DB</span><span class="o">::</span><span class="nf">table</span><span class="p">(</span><span class="s1">'products'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">insert</span><span class="p">([</span>
            <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'Detergente Ariel 1.5L'</span><span class="p">,</span>
            <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'Detergente líquido para lavadoras'</span><span class="p">,</span>
            <span class="s1">'price'</span> <span class="o">=&gt;</span> <span class="s1">'4.90'</span><span class="p">,</span>
        <span class="p">]);</span>
        <span class="no">DB</span><span class="o">::</span><span class="nf">table</span><span class="p">(</span><span class="s1">'products'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">insert</span><span class="p">([</span>
            <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'Gel Hidroalcohólico 350ml'</span><span class="p">,</span>
            <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'Gel hidroalcólico sin perfume, 70% de alcohol'</span><span class="p">,</span>
            <span class="s1">'price'</span> <span class="o">=&gt;</span> <span class="s1">'3.50'</span><span class="p">,</span>
        <span class="p">]);</span>
        <span class="no">DB</span><span class="o">::</span><span class="nf">table</span><span class="p">(</span><span class="s1">'products'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">insert</span><span class="p">([</span>
            <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'Gel de baño con avena - 750 ml'</span><span class="p">,</span>
            <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'Gel de baño con aceites vegetales, hipoalergénico'</span><span class="p">,</span>
            <span class="s1">'price'</span> <span class="o">=&gt;</span> <span class="s1">'1.50'</span><span class="p">,</span>
        <span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <h3 id="enrutador"> <a href="#enrutador" class="anchor-heading" aria-labelledby="enrutador"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Enrutador </h3> <p>El enrutador de la aplicación está en <strong><em>/routes/web.php</em></strong>.</p> <p>Basta con abrirlo y añadir esta línea:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Route</span><span class="o">::</span><span class="nf">resource</span><span class="p">(</span><span class="s1">'products'</span><span class="p">,</span> <span class="s1">'ProductController'</span><span class="p">);</span>
</code></pre></div></div> <p>Alternativamente, podrías crear a mano las siete entradas correspondientes a las <strong>siete rutas de un servidor REST</strong>, así:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'product'</span><span class="p">,</span> <span class="s1">'ProductController@index'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'product.index'</span><span class="p">);</span>
<span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'product/{product}'</span><span class="p">,</span> <span class="s1">'ProductController@show'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'product.show'</span><span class="p">);</span>
<span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'product/create'</span><span class="p">,</span> <span class="s1">'ProductController@create'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'product.create'</span><span class="p">);</span>
<span class="nc">Route</span><span class="o">::</span><span class="nf">post</span><span class="p">(</span><span class="s1">'product/{product}'</span><span class="p">,</span> <span class="s1">'ProductController@store'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'product.store'</span><span class="p">);</span>
<span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'product/{product}/edit'</span><span class="p">,</span> <span class="s1">'ProductController@edit'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'product.edit'</span><span class="p">);</span>
<span class="nc">Route</span><span class="o">::</span><span class="nf">patch</span><span class="p">(</span><span class="s1">'product/{product}'</span><span class="p">,</span> <span class="s1">'ProductController@update'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'product.update'</span><span class="p">);</span>
<span class="nc">Route</span><span class="o">::</span><span class="nb">delete</span><span class="p">(</span><span class="s1">'product/{product}'</span><span class="p">,</span> <span class="s1">'ProductController@destroy'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'product.destroy'</span><span class="p">);</span>
</code></pre></div></div> <p>El resultado sería el mismo, pero si defines manualmente las rutas, tienes más control sobre cómo son exactamente. Por ejemplo, puedes traducirlas a español (¿qué tal cambiar “product/create” por “producto/crear”?).</p> <p>O podrías hacer algún cambio más profundo a nivel técnico. Por ejemplo, que la petición para hacer <em>delete</em> llegue por GET en lugar de por DELETE (así no tendrías que usar un botón de formulario para lanzar el borrado de un producto y podrías lanzarlo con un link).</p> <p>Eso sí: ten en cuenta que, si haces algún cambio de este tipo en las rutas, tu servidor ya no será 100% REST.</p> <p>Hay una posibilidad intermedia: respetar las 7 rutas estándar REST y <em>añadir</em> alguna adicional que te venga bien, como el borrado mediante GET. Algo así:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Estas son las 7 rutas estándar REST:</span>
<span class="nc">Route</span><span class="o">::</span><span class="nf">resource</span><span class="p">(</span><span class="s1">'products'</span><span class="p">,</span> <span class="s1">'ProductController'</span><span class="p">);</span>
<span class="c1">// Añadimos una ruta NO ESTÁNDAR para borrar productos mediante GET</span>
<span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'product/delete/{product}'</span><span class="p">,</span> <span class="s1">'ProductController@destroy'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'product.myDestroy'</span><span class="p">);</span>
</code></pre></div></div> <h3 id="controlador"> <a href="#controlador" class="anchor-heading" aria-labelledby="controlador"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Controlador </h3> <p>El controlador de productos se crea con el comando <code class="language-plaintext highlighter-rouge">php artisan make:controller ProductController</code>.</p> <p>El archivo se generará en <strong><em>/app/Http/Controllers/ProductController.php</em></strong>. Tendrás que rellenar el código de los 7 métodos REST con algo como esto::</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>

<span class="kn">namespace</span> <span class="nn">App\Http\Controllers</span><span class="p">;</span>

<span class="kn">use</span> <span class="nc">Illuminate\Http\Request</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">App\Models\Product</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">ProductController</span> <span class="kd">extends</span> <span class="nc">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">index</span><span class="p">()</span> <span class="p">{</span>
        <span class="nv">$productList</span> <span class="o">=</span> <span class="nc">Product</span><span class="o">::</span><span class="nf">all</span><span class="p">();</span>
        <span class="k">return</span> <span class="nf">view</span><span class="p">(</span><span class="s1">'product.all'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'productList'</span><span class="o">=&gt;</span><span class="nv">$productList</span><span class="p">]);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="n">show</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$p</span> <span class="o">=</span> <span class="nc">Product</span><span class="o">::</span><span class="nf">find</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>
        <span class="nv">$data</span><span class="p">[</span><span class="s1">'product'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$p</span><span class="p">;</span>
        <span class="k">return</span> <span class="nf">view</span><span class="p">(</span><span class="s1">'product.show'</span><span class="p">,</span> <span class="nv">$data</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="n">create</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nf">view</span><span class="p">(</span><span class="s1">'product.form'</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="n">store</span><span class="p">(</span><span class="kt">Request</span> <span class="nv">$r</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$p</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Product</span><span class="p">();</span>
        <span class="nv">$p</span><span class="o">-&gt;</span><span class="n">name</span> <span class="o">=</span> <span class="nv">$r</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">;</span>
        <span class="nv">$p</span><span class="o">-&gt;</span><span class="n">description</span> <span class="o">=</span> <span class="nv">$r</span><span class="o">-&gt;</span><span class="n">description</span><span class="p">;</span>
        <span class="nv">$p</span><span class="o">-&gt;</span><span class="n">price</span> <span class="o">=</span> <span class="nv">$r</span><span class="o">-&gt;</span><span class="n">price</span><span class="p">;</span>
        <span class="nv">$p</span><span class="o">-&gt;</span><span class="nf">save</span><span class="p">();</span>
        <span class="k">return</span> <span class="nf">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">route</span><span class="p">(</span><span class="s1">'product.index'</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="n">edit</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$product</span> <span class="o">=</span> <span class="nc">Product</span><span class="o">::</span><span class="nf">find</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>
        <span class="k">return</span> <span class="nf">view</span><span class="p">(</span><span class="s1">'product.form'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'product'</span> <span class="o">=&gt;</span> <span class="nv">$product</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="n">update</span><span class="p">(</span><span class="nv">$id</span><span class="p">,</span> <span class="kt">Request</span> <span class="nv">$r</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$p</span> <span class="o">=</span> <span class="nc">Product</span><span class="o">::</span><span class="nf">find</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>
        <span class="nv">$p</span><span class="o">-&gt;</span><span class="n">name</span> <span class="o">=</span> <span class="nv">$r</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">;</span>
        <span class="nv">$p</span><span class="o">-&gt;</span><span class="n">description</span> <span class="o">=</span> <span class="nv">$r</span><span class="o">-&gt;</span><span class="n">description</span><span class="p">;</span>
        <span class="nv">$p</span><span class="o">-&gt;</span><span class="n">price</span> <span class="o">=</span> <span class="nv">$r</span><span class="o">-&gt;</span><span class="n">price</span><span class="p">;</span>
        <span class="nv">$p</span><span class="o">-&gt;</span><span class="nf">save</span><span class="p">();</span>
        <span class="k">return</span> <span class="nf">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">route</span><span class="p">(</span><span class="s1">'product.index'</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="n">destroy</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$p</span> <span class="o">=</span> <span class="nc">Product</span><span class="o">::</span><span class="nf">find</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>
        <span class="nv">$p</span><span class="o">-&gt;</span><span class="nb">delete</span><span class="p">();</span>
        <span class="k">return</span> <span class="nf">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">route</span><span class="p">(</span><span class="s1">'product.index'</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <h3 id="modelo"> <a href="#modelo" class="anchor-heading" aria-labelledby="modelo"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Modelo </h3> <p>El modelo se crea con el comando <code class="language-plaintext highlighter-rouge">php artisan make:model Product</code>.</p> <p>El archivo con el modelo se generará en <strong><em>app/models/product.php</em></strong>.</p> <p>No es necesario que toques este archivo: puedes dejarlo, de momento, tal y como lo ha generado Artisan.</p> <h3 id="vista-plantilla-principal"> <a href="#vista-plantilla-principal" class="anchor-heading" aria-labelledby="vista-plantilla-principal"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Vista: plantilla principal </h3> <p>La plantilla principal o <em>master layout</em> debes crearla en <strong><em>views/layouts/master.blade.php</em></strong>.</p> <p>Por supuesto, puedes hacerla como quieras. Aquí te propongo un <em>master layout</em> muy sencillito al que luego le podrás ir añadiendo cosas fácilmente:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;html&gt;</span>
     <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;title&gt;</span>@yield('title')<span class="nt">&lt;/title&gt;</span>
     <span class="nt">&lt;/head&gt;</span>
     <span class="nt">&lt;body&gt;</span>
        @section('sidebar')
            Este es mi master sidebar.
        @show

        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
            @yield('content')
        <span class="nt">&lt;/div&gt;</span>
     <span class="nt">&lt;/body&gt;</span>
  <span class="nt">&lt;/html&gt;</span>
</code></pre></div></div> <h3 id="vista-todos-los-productos"> <a href="#vista-todos-los-productos" class="anchor-heading" aria-labelledby="vista-todos-los-productos"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Vista: todos los productos </h3> <p>La vista con todos los productos la llamaremos <strong><em>views/products/all.blade.php</em></strong> y puede tener un aspecto como este:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@extends("layouts.master")

@section("title", "Administración de productos")

@section("header", "Administración de productos")

@section("content")
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">""</span><span class="err">{{</span> <span class="na">route</span><span class="err">('</span><span class="na">product.create</span><span class="err">')</span> <span class="err">}}""</span><span class="nt">&gt;</span>Nuevo<span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;table</span> <span class="na">border=</span><span class="s">'1'</span><span class="nt">&gt;</span>
    @foreach ($productList as $product)
        <span class="nt">&lt;tr&gt;</span>
            <span class="nt">&lt;td&gt;</span>"{{$product-&gt;name}}"<span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;td&gt;</span>"{{$product-&gt;description}}"<span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;td&gt;</span>"{{$product-&gt;price}}"<span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;td&gt;</span>
                <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">""</span><span class="err">{{</span><span class="na">route</span><span class="err">('</span><span class="na">product.edit</span><span class="err">',</span> <span class="err">$</span><span class="na">product-</span><span class="nt">&gt;</span>id)}"}"&gt;Modificar<span class="nt">&lt;/a&gt;&lt;/td&gt;</span>
            <span class="nt">&lt;td&gt;</span>
                <span class="nt">&lt;form</span> <span class="na">action = </span><span class="s">""</span><span class="err">{{</span><span class="na">route</span><span class="err">('</span><span class="na">product.destroy</span><span class="err">',</span> <span class="err">$</span><span class="na">product-</span><span class="nt">&gt;</span>id)}"}" method="POST"&gt;
                    @csrf
                    @method("DELETE")
                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"Borrar"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;/form&gt;</span>
            <span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;br&gt;</span>
    @endforeach
@endsection
</code></pre></div></div> <h3 id="vista-creaciónmodificación-de-productos"> <a href="#vista-creaciónmodificación-de-productos" class="anchor-heading" aria-labelledby="vista-creaciónmodificación-de-productos"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Vista: creación/modificación de productos </h3> <p>Reutilizaremos la vista para crear y modificar productos, puesto que son prácticamente iguales.</p> <p>El archivo de la vista será <strong><em>views/products/form.blade.php</em></strong>, y su contenido puede ser algo así:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@extends("layouts.master")

@section("title", "Inserción de productos")

@section("header", "Inserción de productos")

@section("content")
    @isset($product)
        <span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span><span class="err">{{</span> <span class="na">route</span><span class="err">('</span><span class="na">product.update</span><span class="err">',</span> <span class="err">['</span><span class="na">product</span><span class="err">'</span> <span class="err">=</span><span class="nt">&gt;</span> $product-&gt;id]) }}"" method="POST"&gt;
        @method("PUT")
    @else
        <span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span><span class="err">{{</span> <span class="na">route</span><span class="err">('</span><span class="na">product.store</span><span class="err">')</span> <span class="err">}}""</span> <span class="na">method=</span><span class="s">"POST"</span><span class="nt">&gt;</span>
    @endisset
        @csrf
        Nombre del producto:<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">value=</span><span class="s">""</span><span class="err">{{$</span><span class="na">product-</span><span class="nt">&gt;</span>name ?? '' }}""&gt;<span class="nt">&lt;br&gt;</span>
        Descripción:<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"description"</span> <span class="na">value=</span><span class="s">""</span><span class="err">{{$</span><span class="na">product-</span><span class="nt">&gt;</span>description ?? '' }}""&gt;<span class="nt">&lt;br&gt;</span>
        Precio:<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"price"</span> <span class="na">value=</span><span class="s">""</span><span class="err">{{$</span><span class="na">product-</span><span class="nt">&gt;</span>price ?? '' }}""&gt;<span class="nt">&lt;br&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/form&gt;</span>
@endsection
</code></pre></div></div> <p>Observa cómo se genera una cabecera de formulario distinta según se vaya a usar el formulario para crear o para modificar un producto. Asímismo, fíjate en cómo se rellenan los atributos <em>value</em> de los campos del formulario con los datos actuales del producto (en caso de que existan).</p> <h3 id="y-ahora-qué"> <a href="#y-ahora-qué" class="anchor-heading" aria-labelledby="y-ahora-qué"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> ¿Y ahora qué? </h3> <p>Ahora ha llegado el momento de comprobar si tu aplicación funciona.</p> <p>Primero, lanza las migraciones y los seeders con <code class="language-plaintext highlighter-rouge">php artisan migrate:fresh --seed</code>. Asegúrate de haber añadido tu seeder de productos a <em>DatabaseSeeder.php</em> para que se lance automáticamente tras las migraciones. Si todo va bien, la aplicación estará lista para responder en <strong>https://tu-servidor-local/product</strong></p> <p>El código que hemos mostrado hasta aquí solo es un pequeño ejemplo y se puede mejorar de muchísimas maneras, por supuesto. Estas son algunas mejoras evidentes:</p> <ul> <li>Programar la vista <strong>product/show.blade.php</strong>, que está ausente en el código anterior. Esa es la vista que mostrará un producto individual. Si intentas lanzarla ahora pidiendo la ruta <em>https://tu-servidor/product/1</em> (sustituye 1 por el ID de cualquier producto), verás que Laravel te da un error de “View not found”.</li> <li>Se puede simplificar el método <em>store()</em> del controlador haciendo una asignación masiva. Bastaría con indicar en el modelo que todos los campos de la tabla son <em>fillables</em> para poder hacer en el método <em>store()</em> del controlador algo como esto: <code class="language-plaintext highlighter-rouge">$p = new Product($r-&gt;all())</code></li> <li>Se puede alterar el aspecto visual de la aplicación trabajando el <em>master layout</em> y añadiendo ahí algo de CSS y/o Javascript, sin que haya que tocar el resto de vistas.</li> <li>A partir de ahí, habría que seguir construyendo la aplicación, añadiendo más tablas con su correspondientes controladores, modelos y vistas. Llegará un momento en el que tendremos que crear las relaciones entre las tablas en los modelos, como explicamos en el apartado dedicado a Eloquent.</li> <li>Otro paso lógico, común a muchas aplicaciones web, sería añadir un sistema de autenticación con <strong>Laravel Breeze</strong>.</li> </ul> <p>Utiliza este código fuente como punto de partida para tus propios desarrollos con Laravel. Cuando hayas cogido un poco de práctica, verás que resulta mucho más rápido montar una aplicación web convencional con Laravel que hacerlo con PHP clásico.</p> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
