---
layout: page
title: 5.18 Ejemplo de aplicación desarrollada con Laravel
permalink: /laravel/ejemplo-aplicacion-con-laravel
nav_order: 16
has_children: false
parent: 5 Laravel
grand_parent: Desarrollo Web en Entorno Servidor
---

## 5.18. Un ejemplo de aplicación desarrollada con Laravel
{: .no_toc }

- TOC
{:toc}

Para finalizar esta introducción (sí, sí: aunque haya sido muy largo, no es más que una introducción) a Laravel, vamos a **desarrollar una pequeña aplicación web desde cero**.

Se tratará, en realidad, de un fragmento de otra aplicación más grande: una tienda online o tal vez un sistema de gestión de almacén. Da lo mismo. Nosotros vamos a desarrollar la parte de **mantenimiento de productos**.

Para ello, supondremos que en la base de datos existe una tabla llamada *products* con los campos *id, name, description* y *price*.

Vamos a construir el controlador, el modelo y las vistas necesarias para hacer el CRUD completo (create-read-update-delete) de esta tabla con Laravel, sin olvidarnos de las migraciones, los seeders y, por supuesto, el enrutador.

¿Estás preparado/a? Pues vamos allá.

### 5.18.1. Desplegar un Laravel limpio

### 5.18.2. Conectar al servidor

### 5.18.3. Crear las migraciones y los seeders

### 5.18.4. Crear el controlador y actualizar el enrutador

### 5.18.5. Crear el modelo

### 5.18.6. Crear las vistas

### 5.18.7. Código fuente completo

#### Enrutador (/routes/web.php)

Hay que añadir esta línea al enrutador:

```php
<?php
Route::resource('/product', 'ProductController');
```

#### Controlador (/hpp/Http/Controllers/ProductController.php)

```php
<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use App\Product;

class ProductController extends Controller
{
    //
    public function index() {
        $productList = Product::all();
        return view('product.all', ['productList'=>$productList]);
    }

    public function show($id) {
        $usr = Product::find($id);
        $data['product'] = $usr;

        return view('product.show', $data);
    }

    public function create() {
        return view('product.form');
    }

    public function store(Request $r) {
        $usr = new Product();
        $usr->email = $r->email;
        $usr->name = $r->name;
        $usr->password = $r->password;
        $usr->save();
        return redirect()->route('product.index');
    }

    public function edit($id) {
        $product = Product::find($id);
        return view('product.form', array('product' => $product));
    }

    public function update(Request $r) {
        $usr = Product::find($r->id);
        $usr->email = $r->email;
        $usr->name = $r->name;
        $usr->password = $r->password;
        $usr->save();
        return redirect()->route('product.index');
    }

    public function destroy($id) {
        $usr = Product::find($id);
        $usr->delete();
        return redirect()->route('product.index');
    }
}
```

#### Modelo (app/models/product.php)

El modelo no hay que tocarlo. Lo podemos dejar como lo haya generado Artisan.

#### Vista views/layouts/master.blade.php

Esta vista es el *master layout* o plantilla principal

```html
  <html>
     <head>
        <title>@yield('title')</title>
     </head>
     <body>
        @section('sidebar')
            Este es mi master sidebar.
        @show

        <div class="container">
            @yield('content')
        </div>
     </body>
  </html>
```

#### Vista views/products/all.blade.php

Esta es la vista para mostrar todos los productos.

```html
@extends("layouts.master")

@section("title", "Administración de productos")

@section("header", "Administración de productos")

@section("content")
    <a href="{{ route('product.create') }}">Nuevo</a>
    <table border='1'>
    @foreach ($productList as $product)
        <tr>
            <td>{{$product->name}}</td>
            <td>{{$product->description}}</td>
            <td>{{$product->price}}</td>
            <td><a href="{{route('product.edit', $product->id)}}">Modificar</a></td>
            <td>
                <form action = "{{route('product.destroy', $product->id)}}" method="POST">
                    @csrf
                    @method("DELETE")
                    <input type="submit" value="Borrar">
                </form>
            </td>
        <br>
    @endforeach
@endsection
```

#### Vista views/products/form.blade.php

Esta es la vista para creación/modificación de productos.

```html
@extends("layouts.master")

@section("title", "Inserción de productos")

@section("header", "Inserción de productos")

@section("content")
    @isset($product)
        <form action="{{ route('product.update', ['id' => $product->id]) }}" method="POST">
        @method("PUT")
    @else
        <form action="{{ route('product.store') }}" method="POST">
    @endisset
        @csrf
        Nombre del producto:<input type="text" name="name" value="{{$product->name ?? '' }}"><br>
        Descripción:<input type="text" name="email" value="{{$product->description ?? '' }}"><br>
        Precio:<input type="text" name="text" value="{{$product->price ?? '' }}"><br>
        <input type="submit">
        </form>

@endsection
```

### 5.18.8. ¿Y ahora qué?

Añadir más tablas (y sus relaciones con productos)
Añadir un sistema de autenticación
Crear consultas complejas
Crear vistas complejas
Pruebas
Seguir añadiendo funciones

