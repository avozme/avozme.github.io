<h2 class="no_toc" id="217-prácticas">2.17. Prácticas</h2>

<p>En esta colección de actividades prácticas vamos a montar, poco a poco, una pequeña aplicación web que funcionará en el backend mediante generación de vistas.</p>

<p>La aplicación será un fragmento de un <strong>blog</strong>, es decir, permitirá publicar artículos y mostrarlos. Al finalizar, habrás creado una aplicación sencilla pero funcional con un potente y seguro sistema de autenticación integrado.</p>

<ul id="markdown-toc">
  <li><a href="#actividad-1-preparar-el-entorno" id="markdown-toc-actividad-1-preparar-el-entorno">Actividad 1. Preparar el entorno</a></li>
  <li><a href="#actividad-2-primer-hola-mundo" id="markdown-toc-actividad-2-primer-hola-mundo">Actividad 2: Primer “Hola Mundo”</a></li>
  <li><a href="#actividad-3-plantillas-y-blade" id="markdown-toc-actividad-3-plantillas-y-blade">Actividad 3: Plantillas y Blade</a></li>
  <li><a href="#actividad-4-migraciones-y-eloquent" id="markdown-toc-actividad-4-migraciones-y-eloquent">Actividad 4: Migraciones y Eloquent</a></li>
  <li><a href="#actividad-5-mostrar-todos-los-artículos" id="markdown-toc-actividad-5-mostrar-todos-los-artículos">Actividad 5: Mostrar todos los artículos</a></li>
  <li><a href="#actividad-6-mostrar-un-artículo" id="markdown-toc-actividad-6-mostrar-un-artículo">Actividad 6: Mostrar un artículo</a></li>
  <li><a href="#actividad-7-alta-de-nuevos-artículos" id="markdown-toc-actividad-7-alta-de-nuevos-artículos">Actividad 7: Alta de nuevos artículos</a></li>
  <li><a href="#actividad-8-borrado-de-artículos" id="markdown-toc-actividad-8-borrado-de-artículos">Actividad 8: Borrado de artículos</a></li>
  <li><a href="#actividad-9-autenticación-con-breeze" id="markdown-toc-actividad-9-autenticación-con-breeze">Actividad 9: Autenticación con Breeze</a></li>
  <li><a href="#actividad-10-pulido-final" id="markdown-toc-actividad-10-pulido-final">Actividad 10: Pulido final</a></li>
</ul>

<h3 id="actividad-1-preparar-el-entorno">Actividad 1. Preparar el entorno</h3>

<ul>
  <li><strong>Objetivo</strong>: Familiarizarse con Laravel y preparar la aplicación.</li>
  <li><strong>Tareas</strong>:
    <ol>
      <li><a href="../laravel/instalacion.html#22-instalaci%C3%B3n-de-laravel">Instala Laravel</a> (con Composer o Sail).</li>
      <li>
        <p><a href="../laravel/configuracion.html#233-variables-de-entorno-el-archivo-env">Configura el archivo .env</a> con datos de tu base de datos. Obviamente, tendrás que haber creado la base de datos antes.</p>

        <p>Trabajaremos con estas <strong>tablas en la base de datos</strong> (usa los tipos de datos que te parezcan más razonables para cada campo):</p>
        <ul>
          <li><em>Tabla users</em>: id, username, email, password, role</li>
          <li><em>Tabla articles</em>: id, title, body, date, user_id</li>
        </ul>
      </li>
      <li>Lanza el servidor y comprueba que Laravel responde.</li>
      <li><a href="../laravel/configuracion.html#231-estructura-de-directorios">Explora la estructura de directorios</a> (app, routes, resources/views, public, etc.).</li>
    </ol>
  </li>
  <li><strong>Resultado</strong>: Instalación limpia de Laravel funcionando y lista para desarrollar sobre ella.</li>
</ul>

<h3 id="actividad-2-primer-hola-mundo">Actividad 2: Primer “Hola Mundo”</h3>
<ul>
  <li><strong>Objetivo</strong>: Crear rutas, controladores y vistas básicas con Blade.</li>
  <li><strong>Tareas</strong>:
    <ol>
      <li><a href="../laravel/hola-mundo-con-laravel.html#soluci%C3%B3n-1-saludar-en-el-enrutador">Crea ruta simple en routes/web.php</a> que devuelva un mensaje “Hola, mundo”.</li>
      <li><a href="../laravel/hola-mundo-con-laravel.html#soluci%C3%B3n-2-saludar-en-un-controlador">Crea un controlador HolaController</a> con métodos <em>index()</em> y <em>show($nombre)</em> que hagan el saludo desde el propio controlador. El método <em>show($nombre)</em> debe incluir en el saludo el nombre de la persona que recibe como parámetro.</li>
      <li><a href="../laravel/hola-mundo-con-laravel.html#soluci%C3%B3n-3-saludar-en-una-vista">Crea una vista Blade</a> (hola.blade.php) para mostrar los saludos.</li>
      <li>Prueba la URL <em>http://servidor/hola</em> en el navegador con parámetro y sin parámetro. Asegúrate que funciona según lo esperado en ambos casos.</li>
    </ol>
  </li>
  <li><strong>Resultado</strong>: Construcción del primer controlador y vista funcional con Blade, con paso de parámetros en la URL.</li>
</ul>

<h3 id="actividad-3-plantillas-y-blade">Actividad 3: Plantillas y Blade</h3>
<ul>
  <li><strong>Objetivo</strong>: Aprender el uso de layouts, secciones y condicionales en Blade.</li>
  <li><strong>Tareas</strong>:
    <ol>
      <li>Crea una nueva entrada en el enrutador y el controlador anteriores que renderice una vista llamada <em>articlesList</em>. <a href="../laravel/vistas-blade.html#276-condiciones-en-las-vistas">Esta vista debe recibir tres datos</a>: el id del usuario autor de los artículos, el nombre de ese usuario y un array con los títulos de los artículos. Puedes asignar, de momento, valores fijos a esas variables antes de pasárselas a la vista.</li>
      <li><a href="../laravel/vistas-blade.html#272-master-layout">Crea el master layout (layouts/master.blade.php)</a> con secciones title, sidebar y content.</li>
      <li>
        <p><a href="../laravel/vistas-blade.html#273-vistas-que-heredan-del-master-layout">Crea vista heredada page.blade.php</a> que extienda el master layout.</p>

        <p>La vista que has creado recibirá tres datos: <em>$id</em> (el id de un autor), <em>$username</em> (el nombre del autor) y <em>$articles</em> (un array con los títulos de los artículos que ha escrito ese autor). Muestra el <em>$id</em> y el <em>$username</em> en una salida HTML (la lista de títulos la usaremos enseguida).</p>
      </li>
      <li><a href="../laravel/vistas-blade.html#276-condiciones-en-las-vistas">Crea salida dinámica y condicional (@if, @else)</a>. Modifica la vista para que la lista de títulos solo se muestre si contiene datos. Si la lista está vacía, muestra el texto “No existen artículos”.</li>
      <li><a href="../laravel/vistas-blade.html#277-bucles-en-las-vistas">Usa bucles (@foreach)</a>. Recorre el array con los títulos de los artículos y muéstralos en la salida HTML.</li>
    </ol>
  </li>
  <li><strong>Resultado</strong>: Construcción de vistas con Blade consistentes, reutilizables y dinámicas.</li>
</ul>

<h3 id="actividad-4-migraciones-y-eloquent">Actividad 4: Migraciones y Eloquent</h3>
<ul>
  <li><strong>Objetivo</strong>: Crear la base de datos, las migraciones y los modelos, así como algunas consultas de prueba.</li>
  <li><strong>Tareas</strong>:
    <ol>
      <li><a href="../laravel/vistas-blade.html#277-bucles-en-las-vistas">Crea las migraciones</a> para las tablas <em>users</em> y <em>articles</em>.</li>
      <li><a href="../laravel/vistas-blade.html#277-bucles-en-las-vistas">Crea seeders para ambas tablas</a>. Rellena las tablas con unos cuantos datos ficticios pero realistas generados con <em>Faker</em>.</li>
      <li><a href="../laravel/eloquent.html#2102-c%C3%B3mo-puedo-usar-eloquent-en-mi-aplicaci%C3%B3n">Crea los modelos</a> User y Article.</li>
      <li>Ejecutar migraciones y los seeders..</li>
      <li><a href="../laravel/eloquent.html#2104-consultas-con-eloquent">Haz consultas básicas con Eloquent</a> (all(), find(), where(), save()). Para comprobar que funcionan, puedes crear una ruta y un método en el controlador desde el que lanzar las consultas y mostrar los resultados.</li>
    </ol>
  </li>
  <li><strong>Resultado</strong>: BD preparada y Eloquent funcionando.</li>
</ul>

<h3 id="actividad-5-mostrar-todos-los-artículos">Actividad 5: Mostrar todos los artículos</h3>
<ul>
  <li><strong>Objetivo</strong>: Crear una vista con todos los artículos</li>
  <li><strong>Tareas</strong>:
    <ol>
      <li>Crea la ruta <em>articles</em> en el enrutador (<em>routes/web.php</em>). Que ejecute el método <em>index()</em> del controlador de artículos.</li>
      <li>Modifica el controlador de artículos para que el método <em>index()</em> recupere todos los artículos de la base de datos y se los pase a la vista <em>articles/index.blade.php</em></li>
      <li>Crea la vista <em>articles/index.blade.php</em>, que recibirá la lista de artículos y los mostrará. Solo debe aparecer el título del artículo y la fecha.</li>
    </ol>
  </li>
  <li><strong>Resultado</strong>: Vista principal de artículos preparada</li>
</ul>

<h3 id="actividad-6-mostrar-un-artículo">Actividad 6: Mostrar un artículo</h3>

<ul>
  <li><strong>Objetivo</strong>: Mostrar la información completa de un artículo al hacer clic en su título desde la lista general.</li>
  <li><strong>Tareas:</strong>
    <ol>
      <li>Crea ruta <em>articles/{id}</em> en <em>routes/web.php</em>. Ponle un nombre: <em>articles.show</em>.</li>
      <li>Añade el método <em>show($id)</em> al controlador de artículos. Este método debe buscar el artículo con Eloquent y lo pasarlo a la vista <em>articles/show.blade.php</em> que vamos a crear enseguida.</li>
      <li>Crea vista <em>articles/show.blade.php</em> que muestre título, contenido, autor y fecha del artículo que se le ha pasado desde el controlador.</li>
      <li>En <em>articles/index.blade.php</em>, convierte el título de cada artículo en enlace a la ruta de que has creado en este ejercicio. Usa para ello <code class="language-plaintext highlighter-rouge">route('articles.show', $article-&gt;id)</code>.</li>
    </ol>
  </li>
  <li><strong>Resultado</strong>: Navegación completa entre el listado de artículos y la vista de detalle de cada uno.</li>
</ul>

<h3 id="actividad-7-alta-de-nuevos-artículos">Actividad 7: Alta de nuevos artículos</h3>

<ul>
  <li><strong>Objetivo</strong>: Crear nuevos artículos desde la aplicación, con mensajes de realimentación al usuario.</li>
  <li><strong>Tareas</strong>:
    <ol>
      <li>Crea las rutas <em>articles/create</em> (GET) y <em>articles</em> (POST) en <em>routes/web.php</em>. Nómbralas <em>articles.create</em> y <em>articles.store</em>.</li>
      <li>Añade al controlador de artículos dos métodos:
        <ul>
          <li><em>create()</em> para mostrar el formulario (vista <em>articles/create.blade.php</em>).</li>
          <li><em>store()</em> para validar los datos del formulario (<em>title, body, date</em>), guardar el artículo en la BD y redirigir a la lista de artículos con un mensaje de éxito o de error. Por el momento, que todos los artículos se guarden con el <em>user_id = 1</em>.</li>
        </ul>
      </li>
      <li>Crea vista <em>articles/create.blade.php</em> con un formulario que incluya los campos de título, contenido y fecha. Mostrar posibles errores de validación.</li>
      <li>En <em>articles/index.blade.php</em>, añade un enlace “Nuevo artículo” que lleve al formulario de creación.</li>
    </ol>
  </li>
  <li><strong>Resultado</strong>: La aplicación permite ahora añadir artículos nuevos a la base de datos.</li>
</ul>

<h3 id="actividad-8-borrado-de-artículos">Actividad 8: Borrado de artículos</h3>

<ul>
  <li><strong>Objetivo</strong>: Añadir la posibilidad de borrar artículos, con confirmación y mensaje de éxito o error.</li>
  <li><strong>Tareas</strong>:
    <ol>
      <li>Añade la ruta DELETE <em>/articles/{id}</em> en <em>routes/web.php</em> con el nombre <em>articles.destroy</em>.</li>
      <li>En el controlador de artículos, crea método <em>destroy($id)</em> que busque el artículo, lo elimine con Eloquent y redirija a la lista de artículos con un mensaje de confirmación o de error en el borrado.</li>
      <li>En <em>articles/index.blade.php</em>, añadir en cada fila (cada artículo) un enlace o botón “Eliminar” que envíe un formulario con el method=”POST”, @method(‘DELETE’) y @csrf, para que el enrutador capture esa ruta.</li>
      <li>Mostrar el mensaje en la vista de lista (“borrado con éxito” o “error al borrar”) tras el borrado.</li>
    </ol>
  </li>
  <li><strong>Resultado</strong>: La aplicación puede ahora eliminar artículos.</li>
</ul>

<h3 id="actividad-9-autenticación-con-breeze">Actividad 9: Autenticación con Breeze</h3>

<ul>
  <li><strong>Objetivo</strong>: Crear el login/logout y el alta de usuarios.</li>
  <li><strong>Tareas</strong>:
    <ol>
      <li><a href="../laravel/sesiones.html#2124-laravel-breeze">Instala Laravel Breeze</a> para añadir un sistema de autenticación a tu aplicación.</li>
      <li>Prueba el registro de usuarios y el login/logout.</li>
      <li><a href="../laravel/sesiones.html#2124-laravel-breeze">Usa @auth y @guest en las vistas</a> que tienes construidas hasta ahora para mostrar  contenido condicional. Los usuarios autenticados verán su nombre y los enlaces para “Añadir” y “Borrar” artículos. Los usuarios no autenticados no verán esos enlaces.</li>
      <li><a href="../laravel/sesiones.html#2126-autenticaci%C3%B3n-y-middlewares-c%C3%B3mo-proteger-los-controladores">Protege el controlador de artículos</a> para que solo los usuarios autenticados puedan acceder a los métodos que alteran la información (como <em>store()</em> y <em>destroy()</em>). Comprueba que funciona.</li>
    </ol>
  </li>
  <li><strong>Resultado</strong>: Sistema de login/registro funcional integrado en la aplicación.</li>
</ul>

<h3 id="actividad-10-pulido-final">Actividad 10: Pulido final</h3>
<ul>
  <li><strong>Objetivo</strong>: Consolidar la aplicación y probar el flujo completo.</li>
  <li><strong>Tareas</strong>:
    <ol>
      <li>Modifica la aplicación para que, al crear un artículo, se guarde el id del usuario autenticado (hasta ahora, todos los artículos se estaban guardando con <em>user_id = 1</em>).</li>
      <li>Revisa todos los formularios, mensajes al usuario y rutas.</li>
      <li>Cambia la página de inicio (dashboard) para que, tras el login, vayamos al listado de artículos. Solo deben aparecer los artículos del usuario autenticado.</li>
      <li>Añade la posibilidad de que un usuario autenticado modifique sus artículos. Intenta reutilizar para ello la vista de añadir nuevos artículos en lugar de crear una nueva.</li>
      <li><a href="../laravel/vistas-blade.html#2712-a%C3%B1adir-css-y-javascript-a-nuestras-vistas">Añade un poco de CSS</a> para hacer más atractivas las vistas.</li>
    </ol>
  </li>
  <li><strong>Resultado</strong>: Aplicación funcional de ejemplo, lista para extender con nuevas funcionalidades.</li>
</ul>
