I"`<h2 class="no_toc" id="19-prácticas">1.9. Prácticas</h2>

<ul id="markdown-toc">
  <li><a href="#ejercicio-0-hola-mundo" id="markdown-toc-ejercicio-0-hola-mundo">Ejercicio 0: hola, mundo</a></li>
  <li><a href="#ejercicio-1-comparar-números" id="markdown-toc-ejercicio-1-comparar-números">Ejercicio 1: comparar números</a></li>
  <li><a href="#ejercicio-2-anagramas" id="markdown-toc-ejercicio-2-anagramas">Ejercicio 2: anagramas</a></li>
  <li><a href="#ejercicio-3-conexión-básica-a-una-base-de-datos" id="markdown-toc-ejercicio-3-conexión-básica-a-una-base-de-datos">Ejercicio 3: conexión básica a una base de datos</a></li>
  <li><a href="#ejercicio-4-crud-sencillo-mvc" id="markdown-toc-ejercicio-4-crud-sencillo-mvc">Ejercicio 4: CRUD sencillo MVC</a></li>
  <li><a href="#ejercicio-5-autenticación-con-login-básico" id="markdown-toc-ejercicio-5-autenticación-con-login-básico">Ejercicio 5: Autenticación con login básico</a></li>
  <li><a href="#ejercicio-6-sesiones-y-seguridad-mínima" id="markdown-toc-ejercicio-6-sesiones-y-seguridad-mínima">Ejercicio 6: Sesiones y seguridad mínima</a></li>
  <li><a href="#ejercicio-7-listas-de-control-de-acceso" id="markdown-toc-ejercicio-7-listas-de-control-de-acceso">Ejercicio 7. Listas de control de acceso</a></li>
</ul>

<p>Los siguientes son una colección de prácticas de programación que funcionan exactamente igual que los ejercicios en el gimnasio: para fortalecer tu musculatura como programador o programadora.</p>

<p>E igual que los ejercicios en el gimnasio, estos requerirán de ti dedicación, esfuerzo y constancia. Pero por eso estás aquí, ¿no es cierto? Recuerda lo que hemos dicho muchas veces: <strong><em>a programar solo se aprende programando</em></strong>.</p>

<h4 id="ejercicio-0-hola-mundo">Ejercicio 0: hola, mundo</h4>

<p>Este ejercicio lo usaremos para probar la correcta puesta en marcha de nuestro <strong>servidor web local</strong>.</p>

<p>Tienes dos opciones, como mínimo, para poner en marcha el servidor local:</p>

<ol>
  <li><strong>Instalar un servidor nativo</strong>: instala un paquete como XAMPP o instala manualmente Apache y MariaDB en tu sistema operativo. Luego ve al directorio <em>htdocs</em> de tu Apache y escribe un programa “holamundo.php”</li>
  <li><strong>Lanzar un servidor virtualizado con Docker (RECOMENDADO)</strong>: baja y configura las imágenes para Apache, MariaDB y PHP. Lánzalas y pruébalas con un programa “holamundo.php”. Tienes toda la información sobre cómo hacerlo en el <a href="../docker/#a24-montando-con-docker-un-servidor-web-con-persistencia-de-datos">Apéndice 2</a>.</li>
</ol>

<p>Para hacer el resto de ejercicios y prácticas, puedes usar cualquiera de los dos servidores.</p>

<h4 id="ejercicio-1-comparar-números">Ejercicio 1: comparar números</h4>

<p>Vamos a hacer un primer ejercicio muy, muy sencillo para que te vayas soltando con la sintaxis de PHP y la forma de trabajar en el servidor.</p>

<p>Tienes que escribir un programa en PHP que:</p>

<ol>
  <li>Pida dos números al usuario a través de un formulario HTML.</li>
  <li>Los compare para ver cuál es el menor de los dos.</li>
  <li>Muestre todos los números que hay entre el menor y el mayor.</li>
</ol>

<h4 id="ejercicio-2-anagramas">Ejercicio 2: anagramas</h4>

<p>Una palabra es un anagrama de otra si contiene las mismas letras colocadas en orden diferente. Por ejemplo, “CAVA” es un anagrama de “VACA”, y viceversa.</p>

<p>El ejercicio consiste en escribir un programa en PHP que pida al usuario dos palabras y compruebe si la primera es un anagrama de la segunda. Para ello necesitarás:</p>

<ol>
  <li>Crear un formulario HTML con un campo de texto y un botón de envío.</li>
  <li>Procesar el formulario en otro archivo PHP (usa $_GET y $_POST para probar ambos métodos).</li>
  <li>Añadir validaciones básicas (por ejemplo, que el campo no esté vacío).</li>
</ol>

<h4 id="ejercicio-3-conexión-básica-a-una-base-de-datos">Ejercicio 3: conexión básica a una base de datos</h4>

<ol>
  <li><strong>Crea una base de datos</strong> MySQL o MariaDB con una <strong>tabla <em>usuarios(id#, nombre, email, password)</em></strong>.</li>
  <li><strong>Inserta</strong> algunos datos de prueba en la tabla con PHPMyAdmin o MySQL Workbench.</li>
  <li><strong>Conéctate desde PHP</strong> a esa base de datos.</li>
  <li><strong>Inserta datos desde PHP</strong> con una consulta preparada.
    <ul>
      <li>Necesitarás, por un lado, un formulario HTML para pedirle los datos al usuario</li>
      <li>Y, por otro lado, un pequeño programa PHP que procese el envío del formulario y proceda a insertar los datos en la BD.</li>
    </ul>
  </li>
  <li><strong>Consulta</strong> la tabla de usuarios desde PHP y muestra todo su contenido en una salida HTML.</li>
</ol>

<p>Si te sobra algo de tiempo, intenta completar este pequeño programa para que, además:</p>
<ul>
  <li>Pueda <strong>eliminar</strong> usuarios de la tabla.</li>
  <li>Pueda <strong>modificar</strong> usuarios existentes en la tabla.</li>
</ul>

<p>Intenta organizar el código lo mejor posible. El objetivo no es necesariamente minimizar el número de archivos, sino lograr una organización de archivos racional y que te permita depurar y modificar el código con relativa facilidad.</p>

<p>Echa un vistazo a este <a href="../php/ejemplos-resueltos.html#183-lista-de-libros">ejemplo de código</a> para saber cómo empezar.</p>

<h4 id="ejercicio-4-crud-sencillo-mvc">Ejercicio 4: CRUD sencillo MVC</h4>

<p>Utiliza la misma base de datos del ejercicio anterior para:</p>

<ol>
  <li>Implementar un listado de usuarios que, además, incluya las opciones de insertar, modificar y borrar usuarios (CRUD = Create, Read, Update, Delete).</li>
  <li>
    <p>Estructura todo el código en tres carpetas:</p>

    <ul>
      <li><strong>/</strong> (carpeta raíz): coloca aquí tu controlador/enrutador (index.php)</li>
      <li><strong>models/</strong> (consultas a la base de datos)</li>
      <li><strong>views/</strong> (HTML/PHP para mostrar datos)</li>
    </ul>

    <p>El archivo index.php debe recibir la acción (?action=…) y redirigir al método correspondiente.</p>

    <p><strong><em>Puedes, y te aconsejo que así lo hagas, usar el <a href="../php/mvc/#175-una-implementaci%C3%B3n-completa">código fuente de la Biblioteca</a> que hemos visto en clase para hacer este ejercicio.</em></strong></p>
  </li>
</ol>

<h4 id="ejercicio-5-autenticación-con-login-básico">Ejercicio 5: Autenticación con login básico</h4>

<ol>
  <li>Añade a la tabla usuarios un campo rol (p. ej. admin, editor, user…).</li>
  <li>Crea un formulario de login que valide usuario y contraseña.</li>
  <li>Si es correcto, redirige la aplicación al área privada (el CRUD que hiciste en el ejercicio anterior).</li>
  <li>Si no, regresa al login y muestra un mensaje de error.</li>
</ol>

<h4 id="ejercicio-6-sesiones-y-seguridad-mínima">Ejercicio 6: Sesiones y seguridad mínima</h4>

<ol>
  <li>Amplía el código del ejercicio anterior e inicia sesión con <em>session_start()</em> tras un login correcto.</li>
  <li>Guarda el id del usuario y su rol en variables de sesión.</li>
  <li>Asegúrate de que las páginas del CRUD solo son accesibles si existe sesión iniciada.</li>
  <li>Añade un botón de Cerrar sesión que destruya las variables de sesión y regrese al login.</li>
</ol>

<h4 id="ejercicio-7-listas-de-control-de-acceso">Ejercicio 7. Listas de control de acceso</h4>

<p>Modifica la aplicación que estamos construyendo para que:</p>

<ol>
  <li>Solo los usuarios de tipo administrador (rol = admin) puedan acceder a todas las funciones del CRUD.</li>
  <li>Otros usuarios registrados pero no administradores podrán ver la tabla de usuarios pero no operar con ella (ni insertar, ni borrar ni modificar). Si lo intentan, debe aparecer un mensaje de tipo “Acción prohibida”.</li>
  <li>Centraliza la lógica de los permisos en un archivo común (security.php).</li>
</ol>
:ET