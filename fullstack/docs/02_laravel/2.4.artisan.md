---
layout: page
title: 2.4 Artisan
permalink: /laravel/artisan.html
nav_order: 4
has_children: false
parent: 2 Laravel
grand_parent: Desarrollo web full stack
---

## 2.4. Artisan
{: .no_toc }

- TOC
{:toc}

Laravel viene de serie con muchas herramientas útiles. Una de ellas es ***Artisan***, un programa de consola que automatiza montones de tareas habituales del trabajo con Laravel, así que acostúmbrate a tener siempre abierto un terminal de texto en el directorio raíz de tu aplicación.

### 2.4.1. ¿Qué es Artisan y cómo se utiliza?

**Artisan** es una herramienta de consola, escrita en PHP, que viene con Laravel para **ayudarte a realizar tareas cotidianas en tu aplicación de forma automatizada**.

Algunas de esas tareas que automatiza Artisan son:

Generar scaffolding (esqueleto) de controladores y modelos.
Crear migraciones de bases de datos (para manipular la estructura de las tablas)
Rellenar la BD con datos de prueba.
Gestionar y listar rutas.
Cachear y limpiar la aplicación.
Crear baterías de pruebas.
Y otro montón de cosas.

* **Generar *scaffolding*** (esqueletos o andamios) de controladores y modelos.
* **Gestionar las migraciones** de bases de datos. Hablaremos de esto más adelante.
* **Rellenar o resetear la BD** con datos.
* **Gestionar y listar rutas**.
* **Cachear y limpiar la aplicación**, según nos convenga. El cacheo hace que todo funcione más rápido, la limpieza hace que el caché funcione correctamente cuando hacemos ciertos cambios.
* **Crear baterías de pruebas y lanzar los tests** (si usamos PHP Unit, por ejemplo, algo que no lo vamos a ver).
* **Ejecutar código**, por ejemplo con Eloquent, sin necesidad de crear un archivo y lanzarlo.

Y así otro montón de cosas.

No te preocupes si aún no entiendes qué significan algunas de estas cosas. Lo iremos viendo todo poco a poco. Lo importante ahora es que comprendas la tremenda utilidad de Artisan en el trabajo cotidiano con Laravel y que aprendas lo básico de su sintaxis.

### 2.4.2. Un ejemplo práctico: crear un controlador

Veamos cómo funciona Artisan con un ejemplo.

Supongamos que quieres crear un controlador. Para ello, existen dos maneras:

1. **A mano**. Nos vamos al directorio */app/Http/Controllers* y creamos un archivo llamado, digamos, *HolaController.php*. Luego lo rellenamos con el esqueleto de un controlador vacío, copiando y pegando de otro controlador existente y eliminando todo lo que no nos haga falta.

   Este método, obviamente, es lento, farragoso y resulta fácil que cometamos algún error.

2. **Con Artisan**. Simplemente, tecleamos este comando en el directorio raíz de nuestra aplicación:

   ```
   $ php artisan make:controller HolaController
   ```

   ¡Hemos terminado! Artisan creará por nosotros el archivo */app/Http/Controllers/HolaController.php* y lo rellenará con el esqueleto de un controlador vacío y sintácticamente correcto.

### 2.4.3. Artisan con Docker: Sail

Si utilizas Laravel con virtualizado con Docker, según la recomendación oficial, es importante que comprendas que *Artisan solo se puede ejecutar dentro de la máquina virtual*. No es un comando que exista *fuera* de tu servidor.

Laravel proporciona una herramienta llamada ***sail*** para facilitar la ejecución de *artisan* desde el exterior del contenedor. 

Simplemente, para lanzar artisan, escribe esto:

```bash
$ ./vendor/bin/sail artisan <comando-de-artisan>
```

Si te resulta muy largo eso de escribir *./vendor/bin/sail*, puedes crear un alias en tu shell para acortarlo:

```bash
$ alias sail='[ -f sail ] && bash sail || ./vendor/bin/sail'
```

Con ese alias podrás ejecutar *artisan* así:

```bash
$ sail artisan <comando-de-artisan>
```

<div style='color:red'><i>De ahora en adelante, cuando veas un comando de artisan en este manual, recuerda que debes sustituir "php" por "./vendor/bin/sail" si estás trabajando con Docker</i></div>.

### 2.4.4. Chuleta: comandos principales de Artisan

*(Recuerda: sustituye ```php artisan``` por ```./vendor/bin/sail artisan``` si estás usando Docker)*

Una buena forma de empezar con Artisan es teclear este comando:

```bash
$ php artisan list
```

Ya te imaginas lo que hace, ¿verdad?

Por si acaso andas un poco despistado/a hoy, te lo cuento yo: Artisan te mostrará una lista con todos los comandos válidos en tu instalación de Laravel. Esto puede variar según tu versión de Laravel y los componentes que tengas instalados.

En un primer momento, estos son los comandos que más vas a utilizar (cuando te conviertas en un experto/a en Laravel, irán llegando otros por pura necesidad):

| Comando Artisan | Significado |
|-----------------|------------|
| `php artisan serve` | Lanza un servidor de desarrollo (no es necesario si usas Docker) |
| `php artisan migrate` | Para hacer migraciones (gestionar la estructura de la base de datos) |
| `php artisan db:seed` | Para gestionar los datos de la base de datos |
| `php artisan tinker` | REPL interactivo. El REPL es un entorno de línea de comandos donde puedes probar y ejecutar código PHP y acceder a tu aplicación en tiempo real sin crear archivos ni afectar tu código existente. Muy útil para hacer alguna prueba rápida |
| `php artisan make:migration` | Crea una migración |
| `php artisan make:seeder` | Crea un seeder |
| `php artisan make:controller` | Crea un controlador |
| `php artisan make:model` | Crea un modelo |
| `php artisan route:list` | Muestra todas las rutas definidas |
| `$ php artisan config:cache` | Genera configuración optimizada |
| `$ php artisan route:cache` | Optimiza el enrutador |
| `$ php artisan config:clear`<br>`$ php artisan route:clear`<br>`$ php artisan cache:clear`<br>`$ php artisan view:clear` | Elimina las cachés (útil si Laravel no «pilla» los últimos cambios) |

