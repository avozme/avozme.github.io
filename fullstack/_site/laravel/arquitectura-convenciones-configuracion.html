<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>5.4 Arquitectura, convenciones y configuración de Laravel - DESARROLLO WEB FULL STACK</title> <link rel="shortcut icon" href="/docs/fullstack/_site/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/docs/fullstack/_site/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/docs/fullstack/_site/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/docs/fullstack/_site/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>5.4 Arquitectura, convenciones y configuración de Laravel | DESARROLLO WEB FULL STACK</title> <meta name="generator" content="Jekyll v4.2.2" /> <meta property="og:title" content="5.4 Arquitectura, convenciones y configuración de Laravel" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Apuntes del módulo optativo de “Desarrollo web full stack”, de 2º curso del Ciclo Formativo de Grado Superior de Desarrollo de Aplicaciones Web/Multiplataforma impartido en el IES Celia Viñas de Almería (España)" /> <meta property="og:description" content="Apuntes del módulo optativo de “Desarrollo web full stack”, de 2º curso del Ciclo Formativo de Grado Superior de Desarrollo de Aplicaciones Web/Multiplataforma impartido en el IES Celia Viñas de Almería (España)" /> <link rel="canonical" href="http://localhost:4000/docs/fullstack/_site/laravel/arquitectura-convenciones-configuracion.html" /> <meta property="og:url" content="http://localhost:4000/docs/fullstack/_site/laravel/arquitectura-convenciones-configuracion.html" /> <meta property="og:site_name" content="DESARROLLO WEB FULL STACK" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="5.4 Arquitectura, convenciones y configuración de Laravel" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Apuntes del módulo optativo de “Desarrollo web full stack”, de 2º curso del Ciclo Formativo de Grado Superior de Desarrollo de Aplicaciones Web/Multiplataforma impartido en el IES Celia Viñas de Almería (España)","headline":"5.4 Arquitectura, convenciones y configuración de Laravel","url":"http://localhost:4000/docs/fullstack/_site/laravel/arquitectura-convenciones-configuracion.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/docs/fullstack/_site/" class="site-title lh-tight"> DESARROLLO WEB FULL STACK </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/docs/fullstack/_site/" class="nav-list-link">Desarrollo web full stack</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/docs/fullstack/_site/php/" class="nav-list-link">1 Programación web con PHP</a><ul class="nav-list"><li class="nav-list-item "> <a href="http://localhost:4000/docs/fullstack/_site/php/frontend-backend-fullstack.html" class="nav-list-link">1.1 Frontend vs backend vs full stack</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/docs/fullstack/_site/php/caja-de-herramientas.html" class="nav-list-link">1.2 Caja de herramientas</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/docs/fullstack/_site/php/sintaxis-de-php.html" class="nav-list-link">1.3 Sintaxis de PHP</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/docs/fullstack/_site/php/interaccion-con-mysql.html" class="nav-list-link">1.4 Interacción con la base de datos</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/docs/fullstack/_site/php/depuracion-php-xdebug.html" class="nav-list-link">1.5 Depurando el código PHP con xdebug</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/docs/fullstack/_site/php/cookies-y-sesiones.html" class="nav-list-link">1.6 Cookies y variables de sesión</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/docs/fullstack/_site/php/mvc/" class="nav-list-link">1.7 Arquitectura MVC</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/docs/fullstack/_site/php/ejercicios-resueltos.html" class="nav-list-link">1.8 Ejercicios resueltos</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/docs/fullstack/_site/php/ejercicios-propuestos.html" class="nav-list-link">1.9 Ejercicios propuestos</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/docs/fullstack/_site/php/practica.html" class="nav-list-link">1.10 Práctica final</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/docs/fullstack/_site/laravel/" class="nav-list-link">2 Laravel</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="http://localhost:4000/docs/fullstack/_site/api-rest/" class="nav-list-link">3 Desarrollo de un API REST</a></li><li class="nav-list-item "><a href="http://localhost:4000/docs/fullstack/_site/vue-js/" class="nav-list-link">4 Vue.js</a></li><li class="nav-list-item "><a href="http://localhost:4000/docs/fullstack/_site/inertia/" class="nav-list-link">5 Intertia.js</a></li><li class="nav-list-item "><a href="http://localhost:4000/docs/fullstack/_site/scv-git/" class="nav-list-link">Apéndice 1. Sistemas de control de versiones. Git</a></li><li class="nav-list-item "><a href="http://localhost:4000/docs/fullstack/_site/docker/" class="nav-list-link">Apéndice 2. Virtualización con Docker</a></li><li class="nav-list-item "><a href="http://localhost:4000/docs/fullstack/_site/openstack/" class="nav-list-link">Apéndice 3. Despliegue con Openstack</a></li></ul></li><li class="nav-list-item"><a href="http://localhost:4000/docs/fullstack/_site/about/" class="nav-list-link">About</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search DESARROLLO WEB FULL STACK" aria-label="Search DESARROLLO WEB FULL STACK" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="">Desarrollo Web en Entorno Servidor</a></li> <li class="breadcrumb-nav-list-item"><a href="">5 Laravel</a></li> <li class="breadcrumb-nav-list-item"><span>5.4 Arquitectura, convenciones y configuración de Laravel</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h2 class="no_toc" id="54-arquitectura-convenciones-y-configuración-de-laravel"> <a href="#54-arquitectura-convenciones-y-configuración-de-laravel" class="anchor-heading" aria-labelledby="54-arquitectura-convenciones-y-configuración-de-laravel"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.4. Arquitectura, convenciones y configuración de Laravel </h2> <ul id="markdown-toc"> <li><a href="#541-estructura-de-directorios" id="markdown-toc-541-estructura-de-directorios">5.4.1. Estructura de directorios</a></li> <li><a href="#542-convenciones-en-laravel" id="markdown-toc-542-convenciones-en-laravel">5.4.2. Convenciones en Laravel</a></li> <li><a href="#543-variables-de-entorno-el-archivo-env" id="markdown-toc-543-variables-de-entorno-el-archivo-env">5.4.3. Variables de entorno. El archivo .env</a></li> <li><a href="#544-archivos-de-configuración-del-directorio-config" id="markdown-toc-544-archivos-de-configuración-del-directorio-config">5.4.4. Archivos de configuración del directorio /config</a></li> </ul> <p>Como cualquier framework, Laravel sigue una serie de convenciones para los identificadores, la estructura de directorios de la aplicación y la configuración.</p> <p>Aunque no es imprescindible seguir esas convenciones, y puede resultar un poco enojoso las primeras veces (en plan: ¿pero por qué tengo que llamar a esa clase así, si quiero llamarla de otro modo?), a la larga el uso de convenciones ahorra muchísimo tiempo de desarrollo y, sobre todo, de depuración. ¿Cuántas veces no has estado depurando un error consistente en haber olvidado que el nombre de una tabla de la base de datos lo habías escrito en plural y no en singular, o al revés?</p> <p><strong>“Convención sobre configuración”</strong> es un lema de muchos frameworks. Quiere decir que, si seguimos las convenciones del framework, tanto si nos gustan como si no, nos ahorraremos mucho tiempo de discusión sobre la configuración y muchos quebraderos de cabeza posteriormente.</p> <h3 id="541-estructura-de-directorios"> <a href="#541-estructura-de-directorios" class="anchor-heading" aria-labelledby="541-estructura-de-directorios"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.4.1. Estructura de directorios </h3> <p>Después de una instalación limpia de Laravel, nos encotraremos con una estructura típica de directorios que hay que respetar.</p> <p>Los más importantes (al menos, para empezar) son estos:</p> <p><strong>composer.json</strong>: información para composer (ya sabes, el administrador de paquetes de PHP). Sirve para instalar todas las librerías de terceros que Laravel necesita para funcionar. Imprescindible para instalar la aplicación en otro servidor.</p> <p><strong>/app</strong>: el código de nuestra aplicación. Aquí están los <strong>modelos</strong>.</p> <p><strong>/app/config</strong>: configuración de la aplicación.</p> <p><strong>/app/http</strong>: peticiones HTTP, incluyendo los <strong>controladores</strong>.</p> <p><strong>/database</strong>: migraciones y <em>seeders</em> de la base de datos. Las migraciones son muy importantes y les dedicaremos un apartado más adelante.</p> <p><strong>/plugins</strong>: pues eso.</p> <p><strong>/public</strong>: directorio de acceso público. Aquí Laravel generará todo lo que hay que mover al servidor para poner la web en producción. Puedes crear aquí dentro carpetas para colocar imágenes, scripts JS o archivos css.</p> <p><strong>/resources</strong>: Aquí dentro están las <strong>vistas</strong>. También el resto de <em>assets</em> (imágenes, css, js). A diferencia del directorio public, los archivos JS o css que coloquemos aquí estarán precompilados no serán accesibles vía web y, lo que es más importante, podemos crear archivos Less, Sass, JS y varios frameworks JS, y Laravel se encargará de compilarlos automáticamente y generar versiones minimizadas de nuestro CSS y nuestro JS.</p> <p>De momento, vamos a colocar nuestro CSS y nuestro JS en la carpeta /public. Más adelante puedes trastear con /resources si lo deseas.</p> <p><strong>/storage</strong>: aquí Laravel guarda su memoria caché, información sobre las sesiones, vistas compiladas… No debes tocar esta carpeta para nada.</p> <p><strong>/vendors</strong>: librerías de terceros. Es <strong>importante</strong> añadir esta carpeta al .gitignore si vas a construir un repositorio git para tu aplicación Laravel, porque /vendors puede ocupar bastante espacio y no tiene sentido incluirla en tu proyecto. Si necesitas desplegar esta aplicación Laravel en otro servidor, basta con clonar el repositorio y ejecutar <code class="language-plaintext highlighter-rouge">composer update</code>. Eso <em>rellenará</em> la carpeta /vendor con las librerías más adecuadas para ese servidor.</p> <h3 id="542-convenciones-en-laravel"> <a href="#542-convenciones-en-laravel" class="anchor-heading" aria-labelledby="542-convenciones-en-laravel"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.4.2. Convenciones en Laravel </h3> <p>Laravel tiene un montón de convenciones que persiguen hacer más sencilla la configuración de la aplicación y evitar errores tontos que pueden consumir mucho tiempo de depuración.</p> <p>Aunque la mayoría de estas convenciones no son obligatorias, es recomendable respetarlas para ahorrarte quebraderos de cabeza posteriores.</p> <ul> <li> <p>En primer lugar, usa solo <strong>identificadores en inglés</strong>. Mejor <em>User</em> que <em>Usuario</em>. Así, de paso, practicas un poco el idioma universal de la informática.</p> </li> <li> <p><strong>Modelos</strong>: Los nombres de los modelos deben ser iguales a los de las tablas de la base de datos, pero en singular, en CamelCase y con mayúscula.</p> <p>Ejemplo: <em>RegisteredUser</em></p> </li> <li> <p><strong>Controladores</strong>: Llámalos como los modelos, pero añadiendo la palabra “controller”.</p> <p>Ejempo: <em>RegisteredUserController</em></p> </li> <li> <p><strong>Métodos</strong>: Se nombran en camelCase yt empezando con minúscula.</p> <p>Ejemplo: <em>RegisteredUser::getAll()</em></p> </li> <li> <p><strong>Atributos</strong>: Se nombran en en snake_case y empezando con minúscula.</p> <p>Ejemplo: <em>RegisteredUser::first_name</em></p> </li> <li> <p><strong>Variables</strong>: Los identificadores deben ir en camelCase y empezando con minúscula. En plural si se trata de una colección y en singular si es un objeto individual o una variable simple.</p> <p>Ejemplos: <em>bannedUsers</em> (colección, en plural), <em>articleContent</em> (objeto individual, en sigular)</p> </li> <li> <p><strong>Tablas</strong>: Se nombran en plural y en snake_case.</p> <p>Ejemplo: registered_users.</p> </li> <li> <p><strong>Columnas de las tablas</strong>: Se nombran en snake_case, sin referencia al nombre de la tabla.</p> <p>Ejemplo: first_name</p> <ul> <li> <p><strong>Clave primaria</strong>: La llamaremos <em>id</em>. Siempre. No le des más vueltas. <em>id</em> y punto. El tipo: integer y <em>auto-increment</em>.</p> </li> <li> <p><strong>Claves ajenas</strong>: Se forman con el nombre de la tabla ajena en singular más la palabra <em>id</em>. Ejemplo: <em>article_id</em></p> </li> <li> <p><strong>Timestamps</strong>: Laravel siempre crea marcas de tiempo para todo. Y siempre se llaman <em>created_at</em> y <em>updated_at</em>, de tipo <em>datetime</em>. Acostúmbrate a tenerlas en todas tus tablas.</p> </li> </ul> </li> <li> <p><strong>Tablas pivote</strong>: Son esas tablas horribles formadas como resultado de una relación N:N entre dos tablas maestras. Se nombran en snake_case, en plural y orden alfabético. Ejemplo: <em>articles_users</em> será el pivote entre las tablas <em>articles</em> y <em>users</em>.</p> </li> </ul> <h3 id="543-variables-de-entorno-el-archivo-env"> <a href="#543-variables-de-entorno-el-archivo-env" class="anchor-heading" aria-labelledby="543-variables-de-entorno-el-archivo-env"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.4.3. Variables de entorno. El archivo .env </h3> <p>En el directorio raíz de toda aplicación hecha con Laravel existe un archivo muy especial llamado <strong><em>.env</em></strong>. Ojo, porque en los sistemas tipo Linux, todos los archivos cuyo nombre empieza por un punto están ocultos. Debes buscar la opción para mostrar los archivos ocultos de tu navegador de archivos si quieres verlo.</p> <p>Este archivo contiene todas las variables de entorno que configuran la aplicación, como:</p> <ul> <li> <p>APP_ENV: En esta variable se indica si la aplicación está en desarrollo o en producción</p> </li> <li> <p>APP_DEBUG: ¿Queremos mostrar los errores para depuración? Se pone a <em>true</em> durante el desarrollo y se cambia a <em>false</em> al pasar a producción.</p> </li> <li> <p>APP_URL: La URL base de la aplicación. Hay que modificarla cuando movemos la aplicación a otro servidor.</p> </li> <li> <p>DB_CONNECTION, DB_HOST, DB_USERNAME, etc. Es decir, la configuración de la conexión a la base de datos.</p> </li> </ul> <p>Una instalación limpia de Laravel vendrá con un archivo llamado <strong><em>example.env</em></strong>, que contiene una plantilla para que puedas construir tu propio archivo .env. Simplemente, renombra el archivo example.env y asigna los valores correctos a las variables de entorno.</p> <p>Cuidado: <em>el archivo .env NO debe sincronizarse con git</em> (o con el control de versiones que usemos) porque contiene información sensible. Asegúrate de incluirlo en tu <em>.gitignore</em>. Consulta la sección sobre Git de este mismo manual si no sabes como hacerlo.</p> <p>Una vez creado nuestro archivo .env, podemos usar las variables definidas en él en cualquier otra parte de la aplicación. Por ejemplo, en <em>/config/database.php</em> usaremos una expresión así:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s1">'default'</span> <span class="o">=&gt;</span> <span class="nf">env</span><span class="p">(</span><span class="s1">'DB_CONNECTION'</span><span class="p">,</span> <span class="s1">'mysql'</span><span class="p">)</span>
</code></pre></div></div> <p>El primer parámetro de <em>env()</em> es la variable de entorno que queremos consultar y el segundo es el valor por defecto en caso de que la variable no exista.</p> <h3 id="544-archivos-de-configuración-del-directorio-config"> <a href="#544-archivos-de-configuración-del-directorio-config" class="anchor-heading" aria-labelledby="544-archivos-de-configuración-del-directorio-config"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.4.4. Archivos de configuración del directorio /config </h3> <p>En este directorio encontraremos multitud de archivos que configuran el funcionamiento de Laravel.</p> <p>En principio, no es necesario modificar ninguno, porque las configuraciones básicas se manejan desde el archivo .env. Sin embargo, hay situaciones en las que sí necesitaremos acceder a estos archivos y tocar alguna configuración.</p> <p>Algunos archivos de configuración importantes que puedes encontrar aquí son:</p> <ul> <li> <p><strong>database.php</strong>: configuración de la conexión a la base de datos. Toma sus valores principales de .env, pero desde aquí podemos cambiar otras cosas, como el controlador (por defecto es MySQL, pero podemos cambiarlo a PostgreSQL, SQLite, etc).</p> </li> <li> <p><strong>app.php</strong>: nombre de la aplicación, estado (desarrollo, producción…).</p> </li> <li> <p><strong>session.php</strong>: forma en la que se almacenarán las variables de sesión (por defecto, en un fichero en el servidor).</p> </li> </ul> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
